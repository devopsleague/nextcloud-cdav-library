!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("cdav",[],t):"object"==typeof exports?exports.cdav=t():e.cdav=t()}(self,(function(){return(()=>{var e={3099:e=>{e.exports=function(e){if("function"!=typeof e)throw TypeError(String(e)+" is not a function");return e}},6077:(e,t,r)=>{var n=r(111);e.exports=function(e){if(!n(e)&&null!==e)throw TypeError("Can't set "+String(e)+" as a prototype");return e}},1223:(e,t,r)=>{var n=r(5112),s=r(30),a=r(3070),i=n("unscopables"),o=Array.prototype;null==o[i]&&a.f(o,i,{configurable:!0,value:s(null)}),e.exports=function(e){o[i][e]=!0}},1530:(e,t,r)=>{"use strict";var n=r(8710).charAt;e.exports=function(e,t,r){return t+(r?n(e,t).length:1)}},5787:e=>{e.exports=function(e,t,r){if(!(e instanceof t))throw TypeError("Incorrect "+(r?r+" ":"")+"invocation");return e}},9670:(e,t,r)=>{var n=r(111);e.exports=function(e){if(!n(e))throw TypeError(String(e)+" is not an object");return e}},8457:(e,t,r)=>{"use strict";var n=r(9974),s=r(7908),a=r(3411),i=r(7659),o=r(7466),c=r(6135),l=r(8554),u=r(1246);e.exports=function(e){var t,r,p,h,d,f,m=s(e),g="function"==typeof this?this:Array,y=arguments.length,v=y>1?arguments[1]:void 0,b=void 0!==v,x=u(m),P=0;if(b&&(v=n(v,y>2?arguments[2]:void 0,2)),null==x||g==Array&&i(x))for(r=new g(t=o(m.length));t>P;P++)f=b?v(m[P],P):m[P],c(r,P,f);else for(d=(h=l(m,x)).next,r=new g;!(p=d.call(h)).done;P++)f=b?a(h,v,[p.value,P],!0):p.value,c(r,P,f);return r.length=P,r}},1318:(e,t,r)=>{var n=r(5656),s=r(7466),a=r(1400),i=function(e){return function(t,r,i){var o,c=n(t),l=s(c.length),u=a(i,l);if(e&&r!=r){for(;l>u;)if((o=c[u++])!=o)return!0}else for(;l>u;u++)if((e||u in c)&&c[u]===r)return e||u||0;return!e&&-1}};e.exports={includes:i(!0),indexOf:i(!1)}},3411:(e,t,r)=>{var n=r(9670),s=r(9212);e.exports=function(e,t,r,a){try{return a?t(n(r)[0],r[1]):t(r)}catch(t){s(e,"throw",t)}}},4326:e=>{var t={}.toString;e.exports=function(e){return t.call(e).slice(8,-1)}},648:(e,t,r)=>{var n=r(1694),s=r(4326),a=r(5112)("toStringTag"),i="Arguments"==s(function(){return arguments}());e.exports=n?s:function(e){var t,r,n;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(r=function(e,t){try{return e[t]}catch(e){}}(t=Object(e),a))?r:i?s(t):"Object"==(n=s(t))&&"function"==typeof t.callee?"Arguments":n}},9920:(e,t,r)=>{var n=r(6656),s=r(3887),a=r(1236),i=r(3070);e.exports=function(e,t){for(var r=s(t),o=i.f,c=a.f,l=0;l<r.length;l++){var u=r[l];n(e,u)||o(e,u,c(t,u))}}},8544:(e,t,r)=>{var n=r(7293);e.exports=!n((function(){function e(){}return e.prototype.constructor=null,Object.getPrototypeOf(new e)!==e.prototype}))},4994:(e,t,r)=>{"use strict";var n=r(3383).IteratorPrototype,s=r(30),a=r(9114),i=r(8003),o=r(7497),c=function(){return this};e.exports=function(e,t,r){var l=t+" Iterator";return e.prototype=s(n,{next:a(1,r)}),i(e,l,!1,!0),o[l]=c,e}},8880:(e,t,r)=>{var n=r(9781),s=r(3070),a=r(9114);e.exports=n?function(e,t,r){return s.f(e,t,a(1,r))}:function(e,t,r){return e[t]=r,e}},9114:e=>{e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},6135:(e,t,r)=>{"use strict";var n=r(4948),s=r(3070),a=r(9114);e.exports=function(e,t,r){var i=n(t);i in e?s.f(e,i,a(0,r)):e[i]=r}},654:(e,t,r)=>{"use strict";var n=r(2109),s=r(4994),a=r(9518),i=r(7674),o=r(8003),c=r(8880),l=r(1320),u=r(5112),p=r(1913),h=r(7497),d=r(3383),f=d.IteratorPrototype,m=d.BUGGY_SAFARI_ITERATORS,g=u("iterator"),y="keys",v="values",b="entries",x=function(){return this};e.exports=function(e,t,r,u,d,P,_){s(r,t,u);var w,A,R,S=function(e){if(e===d&&C)return C;if(!m&&e in E)return E[e];switch(e){case y:case v:case b:return function(){return new r(this,e)}}return function(){return new r(this)}},T=t+" Iterator",L=!1,E=e.prototype,O=E[g]||E["@@iterator"]||d&&E[d],C=!m&&O||S(d),F="Array"==t&&E.entries||O;if(F&&(w=a(F.call(new e)))!==Object.prototype&&w.next&&(p||a(w)===f||(i?i(w,f):"function"!=typeof w[g]&&c(w,g,x)),o(w,T,!0,!0),p&&(h[T]=x)),d==v&&O&&O.name!==v&&(L=!0,C=function(){return O.call(this)}),p&&!_||E[g]===C||c(E,g,C),h[t]=C,d)if(A={values:S(v),keys:P?C:S(y),entries:S(b)},_)for(R in A)(m||L||!(R in E))&&l(E,R,A[R]);else n({target:t,proto:!0,forced:m||L},A);return A}},9781:(e,t,r)=>{var n=r(7293);e.exports=!n((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]}))},317:(e,t,r)=>{var n=r(7854),s=r(111),a=n.document,i=s(a)&&s(a.createElement);e.exports=function(e){return i?a.createElement(e):{}}},8324:e=>{e.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},8509:(e,t,r)=>{var n=r(317)("span").classList,s=n&&n.constructor&&n.constructor.prototype;e.exports=s===Object.prototype?void 0:s},8113:(e,t,r)=>{var n=r(5005);e.exports=n("navigator","userAgent")||""},7392:(e,t,r)=>{var n,s,a=r(7854),i=r(8113),o=a.process,c=a.Deno,l=o&&o.versions||c&&c.version,u=l&&l.v8;u?s=(n=u.split("."))[0]<4?1:n[0]+n[1]:i&&(!(n=i.match(/Edge\/(\d+)/))||n[1]>=74)&&(n=i.match(/Chrome\/(\d+)/))&&(s=n[1]),e.exports=s&&+s},748:e=>{e.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},2109:(e,t,r)=>{var n=r(7854),s=r(1236).f,a=r(8880),i=r(1320),o=r(3505),c=r(9920),l=r(4705);e.exports=function(e,t){var r,u,p,h,d,f=e.target,m=e.global,g=e.stat;if(r=m?n:g?n[f]||o(f,{}):(n[f]||{}).prototype)for(u in t){if(h=t[u],p=e.noTargetGet?(d=s(r,u))&&d.value:r[u],!l(m?u:f+(g?".":"#")+u,e.forced)&&void 0!==p){if(typeof h==typeof p)continue;c(h,p)}(e.sham||p&&p.sham)&&a(h,"sham",!0),i(r,u,h,e)}}},7293:e=>{e.exports=function(e){try{return!!e()}catch(e){return!0}}},7007:(e,t,r)=>{"use strict";r(4916);var n=r(1320),s=r(2261),a=r(7293),i=r(5112),o=r(8880),c=i("species"),l=RegExp.prototype;e.exports=function(e,t,r,u){var p=i(e),h=!a((function(){var t={};return t[p]=function(){return 7},7!=""[e](t)})),d=h&&!a((function(){var t=!1,r=/a/;return"split"===e&&((r={}).constructor={},r.constructor[c]=function(){return r},r.flags="",r[p]=/./[p]),r.exec=function(){return t=!0,null},r[p](""),!t}));if(!h||!d||r){var f=/./[p],m=t(p,""[e],(function(e,t,r,n,a){var i=t.exec;return i===s||i===l.exec?h&&!a?{done:!0,value:f.call(t,r,n)}:{done:!0,value:e.call(r,t,n)}:{done:!1}}));n(String.prototype,e,m[0]),n(l,p,m[1])}u&&o(l[p],"sham",!0)}},9974:(e,t,r)=>{var n=r(3099);e.exports=function(e,t,r){if(n(e),void 0===t)return e;switch(r){case 0:return function(){return e.call(t)};case 1:return function(r){return e.call(t,r)};case 2:return function(r,n){return e.call(t,r,n)};case 3:return function(r,n,s){return e.call(t,r,n,s)}}return function(){return e.apply(t,arguments)}}},5005:(e,t,r)=>{var n=r(7854),s=function(e){return"function"==typeof e?e:void 0};e.exports=function(e,t){return arguments.length<2?s(n[e]):n[e]&&n[e][t]}},1246:(e,t,r)=>{var n=r(648),s=r(7497),a=r(5112)("iterator");e.exports=function(e){if(null!=e)return e[a]||e["@@iterator"]||s[n(e)]}},8554:(e,t,r)=>{var n=r(9670),s=r(1246);e.exports=function(e,t){var r=arguments.length<2?s(e):t;if("function"!=typeof r)throw TypeError(String(e)+" is not iterable");return n(r.call(e))}},647:(e,t,r)=>{var n=r(7908),s=Math.floor,a="".replace,i=/\$([$&'`]|\d{1,2}|<[^>]*>)/g,o=/\$([$&'`]|\d{1,2})/g;e.exports=function(e,t,r,c,l,u){var p=r+e.length,h=c.length,d=o;return void 0!==l&&(l=n(l),d=i),a.call(u,d,(function(n,a){var i;switch(a.charAt(0)){case"$":return"$";case"&":return e;case"`":return t.slice(0,r);case"'":return t.slice(p);case"<":i=l[a.slice(1,-1)];break;default:var o=+a;if(0===o)return n;if(o>h){var u=s(o/10);return 0===u?n:u<=h?void 0===c[u-1]?a.charAt(1):c[u-1]+a.charAt(1):n}i=c[o-1]}return void 0===i?"":i}))}},7854:(e,t,r)=>{var n=function(e){return e&&e.Math==Math&&e};e.exports=n("object"==typeof globalThis&&globalThis)||n("object"==typeof window&&window)||n("object"==typeof self&&self)||n("object"==typeof r.g&&r.g)||function(){return this}()||Function("return this")()},6656:(e,t,r)=>{var n=r(7908),s={}.hasOwnProperty;e.exports=Object.hasOwn||function(e,t){return s.call(n(e),t)}},3501:e=>{e.exports={}},490:(e,t,r)=>{var n=r(5005);e.exports=n("document","documentElement")},4664:(e,t,r)=>{var n=r(9781),s=r(7293),a=r(317);e.exports=!n&&!s((function(){return 7!=Object.defineProperty(a("div"),"a",{get:function(){return 7}}).a}))},8361:(e,t,r)=>{var n=r(7293),s=r(4326),a="".split;e.exports=n((function(){return!Object("z").propertyIsEnumerable(0)}))?function(e){return"String"==s(e)?a.call(e,""):Object(e)}:Object},2788:(e,t,r)=>{var n=r(5465),s=Function.toString;"function"!=typeof n.inspectSource&&(n.inspectSource=function(e){return s.call(e)}),e.exports=n.inspectSource},9909:(e,t,r)=>{var n,s,a,i=r(8536),o=r(7854),c=r(111),l=r(8880),u=r(6656),p=r(5465),h=r(6200),d=r(3501),f="Object already initialized",m=o.WeakMap;if(i||p.state){var g=p.state||(p.state=new m),y=g.get,v=g.has,b=g.set;n=function(e,t){if(v.call(g,e))throw new TypeError(f);return t.facade=e,b.call(g,e,t),t},s=function(e){return y.call(g,e)||{}},a=function(e){return v.call(g,e)}}else{var x=h("state");d[x]=!0,n=function(e,t){if(u(e,x))throw new TypeError(f);return t.facade=e,l(e,x,t),t},s=function(e){return u(e,x)?e[x]:{}},a=function(e){return u(e,x)}}e.exports={set:n,get:s,has:a,enforce:function(e){return a(e)?s(e):n(e,{})},getterFor:function(e){return function(t){var r;if(!c(t)||(r=s(t)).type!==e)throw TypeError("Incompatible receiver, "+e+" required");return r}}}},7659:(e,t,r)=>{var n=r(5112),s=r(7497),a=n("iterator"),i=Array.prototype;e.exports=function(e){return void 0!==e&&(s.Array===e||i[a]===e)}},4705:(e,t,r)=>{var n=r(7293),s=/#|\.prototype\./,a=function(e,t){var r=o[i(e)];return r==l||r!=c&&("function"==typeof t?n(t):!!t)},i=a.normalize=function(e){return String(e).replace(s,".").toLowerCase()},o=a.data={},c=a.NATIVE="N",l=a.POLYFILL="P";e.exports=a},111:e=>{e.exports=function(e){return"object"==typeof e?null!==e:"function"==typeof e}},1913:e=>{e.exports=!1},2190:(e,t,r)=>{var n=r(5005),s=r(3307);e.exports=s?function(e){return"symbol"==typeof e}:function(e){var t=n("Symbol");return"function"==typeof t&&Object(e)instanceof t}},9212:(e,t,r)=>{var n=r(9670);e.exports=function(e,t,r){var s,a;n(e);try{if(void 0===(s=e.return)){if("throw"===t)throw r;return r}s=s.call(e)}catch(e){a=!0,s=e}if("throw"===t)throw r;if(a)throw s;return n(s),r}},3383:(e,t,r)=>{"use strict";var n,s,a,i=r(7293),o=r(30),c=r(9518),l=r(8880),u=r(5112),p=r(1913),h=u("iterator"),d=!1;[].keys&&("next"in(a=[].keys())?(s=c(c(a)))!==Object.prototype&&(n=s):d=!0),null==n||i((function(){var e={};return n[h].call(e)!==e}))?n={}:p&&(n=o(n)),"function"!=typeof n[h]&&l(n,h,(function(){return this})),e.exports={IteratorPrototype:n,BUGGY_SAFARI_ITERATORS:d}},7497:e=>{e.exports={}},133:(e,t,r)=>{var n=r(7392),s=r(7293);e.exports=!!Object.getOwnPropertySymbols&&!s((function(){var e=Symbol();return!String(e)||!(Object(e)instanceof Symbol)||!Symbol.sham&&n&&n<41}))},590:(e,t,r)=>{var n=r(7293),s=r(5112),a=r(1913),i=s("iterator");e.exports=!n((function(){var e=new URL("b?a=1&b=2&c=3","http://a"),t=e.searchParams,r="";return e.pathname="c%20d",t.forEach((function(e,n){t.delete("b"),r+=n+e})),a&&!e.toJSON||!t.sort||"http://a/c%20d?a=1&c=3"!==e.href||"3"!==t.get("c")||"a=1"!==String(new URLSearchParams("?a=1"))||!t[i]||"a"!==new URL("https://a@b").username||"b"!==new URLSearchParams(new URLSearchParams("a=b")).get("a")||"xn--e1aybc"!==new URL("http://тест").host||"#%D0%B1"!==new URL("http://a#б").hash||"a1c3"!==r||"x"!==new URL("http://x",void 0).host}))},8536:(e,t,r)=>{var n=r(7854),s=r(2788),a=n.WeakMap;e.exports="function"==typeof a&&/native code/.test(s(a))},1574:(e,t,r)=>{"use strict";var n=r(9781),s=r(7293),a=r(1956),i=r(5181),o=r(5296),c=r(7908),l=r(8361),u=Object.assign,p=Object.defineProperty;e.exports=!u||s((function(){if(n&&1!==u({b:1},u(p({},"a",{enumerable:!0,get:function(){p(this,"b",{value:3,enumerable:!1})}}),{b:2})).b)return!0;var e={},t={},r=Symbol(),s="abcdefghijklmnopqrst";return e[r]=7,s.split("").forEach((function(e){t[e]=e})),7!=u({},e)[r]||a(u({},t)).join("")!=s}))?function(e,t){for(var r=c(e),s=arguments.length,u=1,p=i.f,h=o.f;s>u;)for(var d,f=l(arguments[u++]),m=p?a(f).concat(p(f)):a(f),g=m.length,y=0;g>y;)d=m[y++],n&&!h.call(f,d)||(r[d]=f[d]);return r}:u},30:(e,t,r)=>{var n,s=r(9670),a=r(6048),i=r(748),o=r(3501),c=r(490),l=r(317),u=r(6200)("IE_PROTO"),p=function(){},h=function(e){return"<script>"+e+"<\/script>"},d=function(e){e.write(h("")),e.close();var t=e.parentWindow.Object;return e=null,t},f=function(){try{n=new ActiveXObject("htmlfile")}catch(e){}var e,t;f="undefined"!=typeof document?document.domain&&n?d(n):((t=l("iframe")).style.display="none",c.appendChild(t),t.src=String("javascript:"),(e=t.contentWindow.document).open(),e.write(h("document.F=Object")),e.close(),e.F):d(n);for(var r=i.length;r--;)delete f.prototype[i[r]];return f()};o[u]=!0,e.exports=Object.create||function(e,t){var r;return null!==e?(p.prototype=s(e),r=new p,p.prototype=null,r[u]=e):r=f(),void 0===t?r:a(r,t)}},6048:(e,t,r)=>{var n=r(9781),s=r(3070),a=r(9670),i=r(1956);e.exports=n?Object.defineProperties:function(e,t){a(e);for(var r,n=i(t),o=n.length,c=0;o>c;)s.f(e,r=n[c++],t[r]);return e}},3070:(e,t,r)=>{var n=r(9781),s=r(4664),a=r(9670),i=r(4948),o=Object.defineProperty;t.f=n?o:function(e,t,r){if(a(e),t=i(t),a(r),s)try{return o(e,t,r)}catch(e){}if("get"in r||"set"in r)throw TypeError("Accessors not supported");return"value"in r&&(e[t]=r.value),e}},1236:(e,t,r)=>{var n=r(9781),s=r(5296),a=r(9114),i=r(5656),o=r(4948),c=r(6656),l=r(4664),u=Object.getOwnPropertyDescriptor;t.f=n?u:function(e,t){if(e=i(e),t=o(t),l)try{return u(e,t)}catch(e){}if(c(e,t))return a(!s.f.call(e,t),e[t])}},8006:(e,t,r)=>{var n=r(6324),s=r(748).concat("length","prototype");t.f=Object.getOwnPropertyNames||function(e){return n(e,s)}},5181:(e,t)=>{t.f=Object.getOwnPropertySymbols},9518:(e,t,r)=>{var n=r(6656),s=r(7908),a=r(6200),i=r(8544),o=a("IE_PROTO"),c=Object.prototype;e.exports=i?Object.getPrototypeOf:function(e){return e=s(e),n(e,o)?e[o]:"function"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?c:null}},6324:(e,t,r)=>{var n=r(6656),s=r(5656),a=r(1318).indexOf,i=r(3501);e.exports=function(e,t){var r,o=s(e),c=0,l=[];for(r in o)!n(i,r)&&n(o,r)&&l.push(r);for(;t.length>c;)n(o,r=t[c++])&&(~a(l,r)||l.push(r));return l}},1956:(e,t,r)=>{var n=r(6324),s=r(748);e.exports=Object.keys||function(e){return n(e,s)}},5296:(e,t)=>{"use strict";var r={}.propertyIsEnumerable,n=Object.getOwnPropertyDescriptor,s=n&&!r.call({1:2},1);t.f=s?function(e){var t=n(this,e);return!!t&&t.enumerable}:r},7674:(e,t,r)=>{var n=r(9670),s=r(6077);e.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var e,t=!1,r={};try{(e=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set).call(r,[]),t=r instanceof Array}catch(e){}return function(r,a){return n(r),s(a),t?e.call(r,a):r.__proto__=a,r}}():void 0)},2140:(e,t,r)=>{var n=r(111);e.exports=function(e,t){var r,s;if("string"===t&&"function"==typeof(r=e.toString)&&!n(s=r.call(e)))return s;if("function"==typeof(r=e.valueOf)&&!n(s=r.call(e)))return s;if("string"!==t&&"function"==typeof(r=e.toString)&&!n(s=r.call(e)))return s;throw TypeError("Can't convert object to primitive value")}},3887:(e,t,r)=>{var n=r(5005),s=r(8006),a=r(5181),i=r(9670);e.exports=n("Reflect","ownKeys")||function(e){var t=s.f(i(e)),r=a.f;return r?t.concat(r(e)):t}},2248:(e,t,r)=>{var n=r(1320);e.exports=function(e,t,r){for(var s in t)n(e,s,t[s],r);return e}},1320:(e,t,r)=>{var n=r(7854),s=r(8880),a=r(6656),i=r(3505),o=r(2788),c=r(9909),l=c.get,u=c.enforce,p=String(String).split("String");(e.exports=function(e,t,r,o){var c,l=!!o&&!!o.unsafe,h=!!o&&!!o.enumerable,d=!!o&&!!o.noTargetGet;"function"==typeof r&&("string"!=typeof t||a(r,"name")||s(r,"name",t),(c=u(r)).source||(c.source=p.join("string"==typeof t?t:""))),e!==n?(l?!d&&e[t]&&(h=!0):delete e[t],h?e[t]=r:s(e,t,r)):h?e[t]=r:i(t,r)})(Function.prototype,"toString",(function(){return"function"==typeof this&&l(this).source||o(this)}))},7651:(e,t,r)=>{var n=r(4326),s=r(2261);e.exports=function(e,t){var r=e.exec;if("function"==typeof r){var a=r.call(e,t);if("object"!=typeof a)throw TypeError("RegExp exec method returned something other than an Object or null");return a}if("RegExp"!==n(e))throw TypeError("RegExp#exec called on incompatible receiver");return s.call(e,t)}},2261:(e,t,r)=>{"use strict";var n,s,a=r(1340),i=r(7066),o=r(2999),c=r(2309),l=r(30),u=r(9909).get,p=r(9441),h=r(8173),d=RegExp.prototype.exec,f=c("native-string-replace",String.prototype.replace),m=d,g=(n=/a/,s=/b*/g,d.call(n,"a"),d.call(s,"a"),0!==n.lastIndex||0!==s.lastIndex),y=o.UNSUPPORTED_Y||o.BROKEN_CARET,v=void 0!==/()??/.exec("")[1];(g||v||y||p||h)&&(m=function(e){var t,r,n,s,o,c,p,h=this,b=u(h),x=a(e),P=b.raw;if(P)return P.lastIndex=h.lastIndex,t=m.call(P,x),h.lastIndex=P.lastIndex,t;var _=b.groups,w=y&&h.sticky,A=i.call(h),R=h.source,S=0,T=x;if(w&&(-1===(A=A.replace("y","")).indexOf("g")&&(A+="g"),T=x.slice(h.lastIndex),h.lastIndex>0&&(!h.multiline||h.multiline&&"\n"!==x.charAt(h.lastIndex-1))&&(R="(?: "+R+")",T=" "+T,S++),r=new RegExp("^(?:"+R+")",A)),v&&(r=new RegExp("^"+R+"$(?!\\s)",A)),g&&(n=h.lastIndex),s=d.call(w?r:h,T),w?s?(s.input=s.input.slice(S),s[0]=s[0].slice(S),s.index=h.lastIndex,h.lastIndex+=s[0].length):h.lastIndex=0:g&&s&&(h.lastIndex=h.global?s.index+s[0].length:n),v&&s&&s.length>1&&f.call(s[0],r,(function(){for(o=1;o<arguments.length-2;o++)void 0===arguments[o]&&(s[o]=void 0)})),s&&_)for(s.groups=c=l(null),o=0;o<_.length;o++)c[(p=_[o])[0]]=s[p[1]];return s}),e.exports=m},7066:(e,t,r)=>{"use strict";var n=r(9670);e.exports=function(){var e=n(this),t="";return e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.dotAll&&(t+="s"),e.unicode&&(t+="u"),e.sticky&&(t+="y"),t}},2999:(e,t,r)=>{var n=r(7293),s=r(7854).RegExp;t.UNSUPPORTED_Y=n((function(){var e=s("a","y");return e.lastIndex=2,null!=e.exec("abcd")})),t.BROKEN_CARET=n((function(){var e=s("^r","gy");return e.lastIndex=2,null!=e.exec("str")}))},9441:(e,t,r)=>{var n=r(7293),s=r(7854).RegExp;e.exports=n((function(){var e=s(".","s");return!(e.dotAll&&e.exec("\n")&&"s"===e.flags)}))},8173:(e,t,r)=>{var n=r(7293),s=r(7854).RegExp;e.exports=n((function(){var e=s("(?<a>b)","g");return"b"!==e.exec("b").groups.a||"bc"!=="b".replace(e,"$<a>c")}))},4488:e=>{e.exports=function(e){if(null==e)throw TypeError("Can't call method on "+e);return e}},3505:(e,t,r)=>{var n=r(7854);e.exports=function(e,t){try{Object.defineProperty(n,e,{value:t,configurable:!0,writable:!0})}catch(r){n[e]=t}return t}},8003:(e,t,r)=>{var n=r(3070).f,s=r(6656),a=r(5112)("toStringTag");e.exports=function(e,t,r){e&&!s(e=r?e:e.prototype,a)&&n(e,a,{configurable:!0,value:t})}},6200:(e,t,r)=>{var n=r(2309),s=r(9711),a=n("keys");e.exports=function(e){return a[e]||(a[e]=s(e))}},5465:(e,t,r)=>{var n=r(7854),s=r(3505),a="__core-js_shared__",i=n[a]||s(a,{});e.exports=i},2309:(e,t,r)=>{var n=r(1913),s=r(5465);(e.exports=function(e,t){return s[e]||(s[e]=void 0!==t?t:{})})("versions",[]).push({version:"3.17.3",mode:n?"pure":"global",copyright:"© 2021 Denis Pushkarev (zloirock.ru)"})},8710:(e,t,r)=>{var n=r(9958),s=r(1340),a=r(4488),i=function(e){return function(t,r){var i,o,c=s(a(t)),l=n(r),u=c.length;return l<0||l>=u?e?"":void 0:(i=c.charCodeAt(l))<55296||i>56319||l+1===u||(o=c.charCodeAt(l+1))<56320||o>57343?e?c.charAt(l):i:e?c.slice(l,l+2):o-56320+(i-55296<<10)+65536}};e.exports={codeAt:i(!1),charAt:i(!0)}},3197:e=>{"use strict";var t=2147483647,r=/[^\0-\u007E]/,n=/[.\u3002\uFF0E\uFF61]/g,s="Overflow: input needs wider integers to process",a=Math.floor,i=String.fromCharCode,o=function(e){return e+22+75*(e<26)},c=function(e,t,r){var n=0;for(e=r?a(e/700):e>>1,e+=a(e/t);e>455;n+=36)e=a(e/35);return a(n+36*e/(e+38))},l=function(e){var r,n,l=[],u=(e=function(e){for(var t=[],r=0,n=e.length;r<n;){var s=e.charCodeAt(r++);if(s>=55296&&s<=56319&&r<n){var a=e.charCodeAt(r++);56320==(64512&a)?t.push(((1023&s)<<10)+(1023&a)+65536):(t.push(s),r--)}else t.push(s)}return t}(e)).length,p=128,h=0,d=72;for(r=0;r<e.length;r++)(n=e[r])<128&&l.push(i(n));var f=l.length,m=f;for(f&&l.push("-");m<u;){var g=t;for(r=0;r<e.length;r++)(n=e[r])>=p&&n<g&&(g=n);var y=m+1;if(g-p>a((t-h)/y))throw RangeError(s);for(h+=(g-p)*y,p=g,r=0;r<e.length;r++){if((n=e[r])<p&&++h>t)throw RangeError(s);if(n==p){for(var v=h,b=36;;b+=36){var x=b<=d?1:b>=d+26?26:b-d;if(v<x)break;var P=v-x,_=36-x;l.push(i(o(x+P%_))),v=a(P/_)}l.push(i(o(v))),d=c(h,y,m==f),h=0,++m}}++h,++p}return l.join("")};e.exports=function(e){var t,s,a=[],i=e.toLowerCase().replace(n,".").split(".");for(t=0;t<i.length;t++)s=i[t],a.push(r.test(s)?"xn--"+l(s):s);return a.join(".")}},1400:(e,t,r)=>{var n=r(9958),s=Math.max,a=Math.min;e.exports=function(e,t){var r=n(e);return r<0?s(r+t,0):a(r,t)}},5656:(e,t,r)=>{var n=r(8361),s=r(4488);e.exports=function(e){return n(s(e))}},9958:e=>{var t=Math.ceil,r=Math.floor;e.exports=function(e){return isNaN(e=+e)?0:(e>0?r:t)(e)}},7466:(e,t,r)=>{var n=r(9958),s=Math.min;e.exports=function(e){return e>0?s(n(e),9007199254740991):0}},7908:(e,t,r)=>{var n=r(4488);e.exports=function(e){return Object(n(e))}},7593:(e,t,r)=>{var n=r(111),s=r(2190),a=r(2140),i=r(5112)("toPrimitive");e.exports=function(e,t){if(!n(e)||s(e))return e;var r,o=e[i];if(void 0!==o){if(void 0===t&&(t="default"),r=o.call(e,t),!n(r)||s(r))return r;throw TypeError("Can't convert object to primitive value")}return void 0===t&&(t="number"),a(e,t)}},4948:(e,t,r)=>{var n=r(7593),s=r(2190);e.exports=function(e){var t=n(e,"string");return s(t)?t:String(t)}},1694:(e,t,r)=>{var n={};n[r(5112)("toStringTag")]="z",e.exports="[object z]"===String(n)},1340:(e,t,r)=>{var n=r(2190);e.exports=function(e){if(n(e))throw TypeError("Cannot convert a Symbol value to a string");return String(e)}},9711:e=>{var t=0,r=Math.random();e.exports=function(e){return"Symbol("+String(void 0===e?"":e)+")_"+(++t+r).toString(36)}},3307:(e,t,r)=>{var n=r(133);e.exports=n&&!Symbol.sham&&"symbol"==typeof Symbol.iterator},5112:(e,t,r)=>{var n=r(7854),s=r(2309),a=r(6656),i=r(9711),o=r(133),c=r(3307),l=s("wks"),u=n.Symbol,p=c?u:u&&u.withoutSetter||i;e.exports=function(e){return a(l,e)&&(o||"string"==typeof l[e])||(o&&a(u,e)?l[e]=u[e]:l[e]=p("Symbol."+e)),l[e]}},6992:(e,t,r)=>{"use strict";var n=r(5656),s=r(1223),a=r(7497),i=r(9909),o=r(654),c="Array Iterator",l=i.set,u=i.getterFor(c);e.exports=o(Array,"Array",(function(e,t){l(this,{type:c,target:n(e),index:0,kind:t})}),(function(){var e=u(this),t=e.target,r=e.kind,n=e.index++;return!t||n>=t.length?(e.target=void 0,{value:void 0,done:!0}):"keys"==r?{value:n,done:!1}:"values"==r?{value:t[n],done:!1}:{value:[n,t[n]],done:!1}}),"values"),a.Arguments=a.Array,s("keys"),s("values"),s("entries")},4916:(e,t,r)=>{"use strict";var n=r(2109),s=r(2261);n({target:"RegExp",proto:!0,forced:/./.exec!==s},{exec:s})},8783:(e,t,r)=>{"use strict";var n=r(8710).charAt,s=r(1340),a=r(9909),i=r(654),o="String Iterator",c=a.set,l=a.getterFor(o);i(String,"String",(function(e){c(this,{type:o,string:s(e),index:0})}),(function(){var e,t=l(this),r=t.string,s=t.index;return s>=r.length?{value:void 0,done:!0}:(e=n(r,s),t.index+=e.length,{value:e,done:!1})}))},5306:(e,t,r)=>{"use strict";var n=r(7007),s=r(7293),a=r(9670),i=r(9958),o=r(7466),c=r(1340),l=r(4488),u=r(1530),p=r(647),h=r(7651),d=r(5112)("replace"),f=Math.max,m=Math.min,g="$0"==="a".replace(/./,"$0"),y=!!/./[d]&&""===/./[d]("a","$0");n("replace",(function(e,t,r){var n=y?"$":"$0";return[function(e,r){var n=l(this),s=null==e?void 0:e[d];return void 0!==s?s.call(e,n,r):t.call(c(n),e,r)},function(e,s){var l=a(this),d=c(e);if("string"==typeof s&&-1===s.indexOf(n)&&-1===s.indexOf("$<")){var g=r(t,l,d,s);if(g.done)return g.value}var y="function"==typeof s;y||(s=c(s));var v=l.global;if(v){var b=l.unicode;l.lastIndex=0}for(var x=[];;){var P=h(l,d);if(null===P)break;if(x.push(P),!v)break;""===c(P[0])&&(l.lastIndex=u(d,o(l.lastIndex),b))}for(var _,w="",A=0,R=0;R<x.length;R++){P=x[R];for(var S=c(P[0]),T=f(m(i(P.index),d.length),0),L=[],E=1;E<P.length;E++)L.push(void 0===(_=P[E])?_:String(_));var O=P.groups;if(y){var C=[S].concat(L,T,d);void 0!==O&&C.push(O);var F=c(s.apply(void 0,C))}else F=p(S,d,T,L,O,s);T>=A&&(w+=d.slice(A,T)+F,A=T+S.length)}return w+d.slice(A)}]}),!!s((function(){var e=/./;return e.exec=function(){var e=[];return e.groups={a:"7"},e},"7"!=="".replace(e,"$<a>")}))||!g||y)},3948:(e,t,r)=>{var n=r(7854),s=r(8324),a=r(8509),i=r(6992),o=r(8880),c=r(5112),l=c("iterator"),u=c("toStringTag"),p=i.values,h=function(e,t){if(e){if(e[l]!==p)try{o(e,l,p)}catch(t){e[l]=p}if(e[u]||o(e,u,t),s[t])for(var r in i)if(e[r]!==i[r])try{o(e,r,i[r])}catch(t){e[r]=i[r]}}};for(var d in s)h(n[d]&&n[d].prototype,d);h(a,"DOMTokenList")},1637:(e,t,r)=>{"use strict";r(6992);var n=r(2109),s=r(5005),a=r(590),i=r(1320),o=r(2248),c=r(8003),l=r(4994),u=r(9909),p=r(5787),h=r(6656),d=r(9974),f=r(648),m=r(9670),g=r(111),y=r(1340),v=r(30),b=r(9114),x=r(8554),P=r(1246),_=r(5112),w=s("fetch"),A=s("Request"),R=A&&A.prototype,S=s("Headers"),T=_("iterator"),L="URLSearchParams",E="URLSearchParamsIterator",O=u.set,C=u.getterFor(L),F=u.getterFor(E),D=/\+/g,j=Array(4),k=function(e){return j[e-1]||(j[e-1]=RegExp("((?:%[\\da-f]{2}){"+e+"})","gi"))},U=function(e){try{return decodeURIComponent(e)}catch(t){return e}},q=function(e){var t=e.replace(D," "),r=4;try{return decodeURIComponent(t)}catch(e){for(;r;)t=t.replace(k(r--),U);return t}},N=/[!'()~]|%20/g,I={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+"},V=function(e){return I[e]},Y=function(e){return encodeURIComponent(e).replace(N,V)},M=function(e,t){if(t)for(var r,n,s=t.split("&"),a=0;a<s.length;)(r=s[a++]).length&&(n=r.split("="),e.push({key:q(n.shift()),value:q(n.join("="))}))},B=function(e){this.entries.length=0,M(this.entries,e)},X=function(e,t){if(e<t)throw TypeError("Not enough arguments")},H=l((function(e,t){O(this,{type:E,iterator:x(C(e).entries),kind:t})}),"Iterator",(function(){var e=F(this),t=e.kind,r=e.iterator.next(),n=r.value;return r.done||(r.value="keys"===t?n.key:"values"===t?n.value:[n.key,n.value]),r})),z=function(){p(this,z,L);var e,t,r,n,s,a,i,o,c,l=arguments.length>0?arguments[0]:void 0,u=this,d=[];if(O(u,{type:L,entries:d,updateURL:function(){},updateSearchParams:B}),void 0!==l)if(g(l))if("function"==typeof(e=P(l)))for(r=(t=x(l,e)).next;!(n=r.call(t)).done;){if((i=(a=(s=x(m(n.value))).next).call(s)).done||(o=a.call(s)).done||!a.call(s).done)throw TypeError("Expected sequence with length 2");d.push({key:y(i.value),value:y(o.value)})}else for(c in l)h(l,c)&&d.push({key:c,value:y(l[c])});else M(d,"string"==typeof l?"?"===l.charAt(0)?l.slice(1):l:y(l))},$=z.prototype;if(o($,{append:function(e,t){X(arguments.length,2);var r=C(this);r.entries.push({key:y(e),value:y(t)}),r.updateURL()},delete:function(e){X(arguments.length,1);for(var t=C(this),r=t.entries,n=y(e),s=0;s<r.length;)r[s].key===n?r.splice(s,1):s++;t.updateURL()},get:function(e){X(arguments.length,1);for(var t=C(this).entries,r=y(e),n=0;n<t.length;n++)if(t[n].key===r)return t[n].value;return null},getAll:function(e){X(arguments.length,1);for(var t=C(this).entries,r=y(e),n=[],s=0;s<t.length;s++)t[s].key===r&&n.push(t[s].value);return n},has:function(e){X(arguments.length,1);for(var t=C(this).entries,r=y(e),n=0;n<t.length;)if(t[n++].key===r)return!0;return!1},set:function(e,t){X(arguments.length,1);for(var r,n=C(this),s=n.entries,a=!1,i=y(e),o=y(t),c=0;c<s.length;c++)(r=s[c]).key===i&&(a?s.splice(c--,1):(a=!0,r.value=o));a||s.push({key:i,value:o}),n.updateURL()},sort:function(){var e,t,r,n=C(this),s=n.entries,a=s.slice();for(s.length=0,r=0;r<a.length;r++){for(e=a[r],t=0;t<r;t++)if(s[t].key>e.key){s.splice(t,0,e);break}t===r&&s.push(e)}n.updateURL()},forEach:function(e){for(var t,r=C(this).entries,n=d(e,arguments.length>1?arguments[1]:void 0,3),s=0;s<r.length;)n((t=r[s++]).value,t.key,this)},keys:function(){return new H(this,"keys")},values:function(){return new H(this,"values")},entries:function(){return new H(this,"entries")}},{enumerable:!0}),i($,T,$.entries),i($,"toString",(function(){for(var e,t=C(this).entries,r=[],n=0;n<t.length;)e=t[n++],r.push(Y(e.key)+"="+Y(e.value));return r.join("&")}),{enumerable:!0}),c(z,L),n({global:!0,forced:!a},{URLSearchParams:z}),!a&&"function"==typeof S){var G=function(e){if(g(e)){var t,r=e.body;if(f(r)===L)return(t=e.headers?new S(e.headers):new S).has("content-type")||t.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"),v(e,{body:b(0,String(r)),headers:b(0,t)})}return e};if("function"==typeof w&&n({global:!0,enumerable:!0,forced:!0},{fetch:function(e){return w(e,arguments.length>1?G(arguments[1]):{})}}),"function"==typeof A){var W=function(e){return p(this,W,"Request"),new A(e,arguments.length>1?G(arguments[1]):{})};R.constructor=W,W.prototype=R,n({global:!0,forced:!0},{Request:W})}}e.exports={URLSearchParams:z,getState:C}},285:(e,t,r)=>{"use strict";r(8783);var n,s=r(2109),a=r(9781),i=r(590),o=r(7854),c=r(6048),l=r(1320),u=r(5787),p=r(6656),h=r(1574),d=r(8457),f=r(8710).codeAt,m=r(3197),g=r(1340),y=r(8003),v=r(1637),b=r(9909),x=o.URL,P=v.URLSearchParams,_=v.getState,w=b.set,A=b.getterFor("URL"),R=Math.floor,S=Math.pow,T="Invalid scheme",L="Invalid host",E="Invalid port",O=/[A-Za-z]/,C=/[\d+-.A-Za-z]/,F=/\d/,D=/^0x/i,j=/^[0-7]+$/,k=/^\d+$/,U=/^[\dA-Fa-f]+$/,q=/[\0\t\n\r #%/:<>?@[\\\]^|]/,N=/[\0\t\n\r #/:<>?@[\\\]^|]/,I=/^[\u0000-\u0020]+|[\u0000-\u0020]+$/g,V=/[\t\n\r]/g,Y=function(e,t){var r,n,s;if("["==t.charAt(0)){if("]"!=t.charAt(t.length-1))return L;if(!(r=B(t.slice(1,-1))))return L;e.host=r}else if(Q(e)){if(t=m(t),q.test(t))return L;if(null===(r=M(t)))return L;e.host=r}else{if(N.test(t))return L;for(r="",n=d(t),s=0;s<n.length;s++)r+=W(n[s],H);e.host=r}},M=function(e){var t,r,n,s,a,i,o,c=e.split(".");if(c.length&&""==c[c.length-1]&&c.pop(),(t=c.length)>4)return e;for(r=[],n=0;n<t;n++){if(""==(s=c[n]))return e;if(a=10,s.length>1&&"0"==s.charAt(0)&&(a=D.test(s)?16:8,s=s.slice(8==a?1:2)),""===s)i=0;else{if(!(10==a?k:8==a?j:U).test(s))return e;i=parseInt(s,a)}r.push(i)}for(n=0;n<t;n++)if(i=r[n],n==t-1){if(i>=S(256,5-t))return null}else if(i>255)return null;for(o=r.pop(),n=0;n<r.length;n++)o+=r[n]*S(256,3-n);return o},B=function(e){var t,r,n,s,a,i,o,c=[0,0,0,0,0,0,0,0],l=0,u=null,p=0,h=function(){return e.charAt(p)};if(":"==h()){if(":"!=e.charAt(1))return;p+=2,u=++l}for(;h();){if(8==l)return;if(":"!=h()){for(t=r=0;r<4&&U.test(h());)t=16*t+parseInt(h(),16),p++,r++;if("."==h()){if(0==r)return;if(p-=r,l>6)return;for(n=0;h();){if(s=null,n>0){if(!("."==h()&&n<4))return;p++}if(!F.test(h()))return;for(;F.test(h());){if(a=parseInt(h(),10),null===s)s=a;else{if(0==s)return;s=10*s+a}if(s>255)return;p++}c[l]=256*c[l]+s,2!=++n&&4!=n||l++}if(4!=n)return;break}if(":"==h()){if(p++,!h())return}else if(h())return;c[l++]=t}else{if(null!==u)return;p++,u=++l}}if(null!==u)for(i=l-u,l=7;0!=l&&i>0;)o=c[l],c[l--]=c[u+i-1],c[u+--i]=o;else if(8!=l)return;return c},X=function(e){var t,r,n,s;if("number"==typeof e){for(t=[],r=0;r<4;r++)t.unshift(e%256),e=R(e/256);return t.join(".")}if("object"==typeof e){for(t="",n=function(e){for(var t=null,r=1,n=null,s=0,a=0;a<8;a++)0!==e[a]?(s>r&&(t=n,r=s),n=null,s=0):(null===n&&(n=a),++s);return s>r&&(t=n,r=s),t}(e),r=0;r<8;r++)s&&0===e[r]||(s&&(s=!1),n===r?(t+=r?":":"::",s=!0):(t+=e[r].toString(16),r<7&&(t+=":")));return"["+t+"]"}return e},H={},z=h({},H,{" ":1,'"':1,"<":1,">":1,"`":1}),$=h({},z,{"#":1,"?":1,"{":1,"}":1}),G=h({},$,{"/":1,":":1,";":1,"=":1,"@":1,"[":1,"\\":1,"]":1,"^":1,"|":1}),W=function(e,t){var r=f(e,0);return r>32&&r<127&&!p(t,e)?e:encodeURIComponent(e)},K={ftp:21,file:null,http:80,https:443,ws:80,wss:443},Q=function(e){return p(K,e.scheme)},Z=function(e){return""!=e.username||""!=e.password},J=function(e){return!e.host||e.cannotBeABaseURL||"file"==e.scheme},ee=function(e,t){var r;return 2==e.length&&O.test(e.charAt(0))&&(":"==(r=e.charAt(1))||!t&&"|"==r)},te=function(e){var t;return e.length>1&&ee(e.slice(0,2))&&(2==e.length||"/"===(t=e.charAt(2))||"\\"===t||"?"===t||"#"===t)},re=function(e){var t=e.path,r=t.length;!r||"file"==e.scheme&&1==r&&ee(t[0],!0)||t.pop()},ne=function(e){return"."===e||"%2e"===e.toLowerCase()},se={},ae={},ie={},oe={},ce={},le={},ue={},pe={},he={},de={},fe={},me={},ge={},ye={},ve={},be={},xe={},Pe={},_e={},we={},Ae={},Re=function(e,t,r,s){var a,i,o,c,l,u=r||se,h=0,f="",m=!1,g=!1,y=!1;for(r||(e.scheme="",e.username="",e.password="",e.host=null,e.port=null,e.path=[],e.query=null,e.fragment=null,e.cannotBeABaseURL=!1,t=t.replace(I,"")),t=t.replace(V,""),a=d(t);h<=a.length;){switch(i=a[h],u){case se:if(!i||!O.test(i)){if(r)return T;u=ie;continue}f+=i.toLowerCase(),u=ae;break;case ae:if(i&&(C.test(i)||"+"==i||"-"==i||"."==i))f+=i.toLowerCase();else{if(":"!=i){if(r)return T;f="",u=ie,h=0;continue}if(r&&(Q(e)!=p(K,f)||"file"==f&&(Z(e)||null!==e.port)||"file"==e.scheme&&!e.host))return;if(e.scheme=f,r)return void(Q(e)&&K[e.scheme]==e.port&&(e.port=null));f="","file"==e.scheme?u=ye:Q(e)&&s&&s.scheme==e.scheme?u=oe:Q(e)?u=pe:"/"==a[h+1]?(u=ce,h++):(e.cannotBeABaseURL=!0,e.path.push(""),u=_e)}break;case ie:if(!s||s.cannotBeABaseURL&&"#"!=i)return T;if(s.cannotBeABaseURL&&"#"==i){e.scheme=s.scheme,e.path=s.path.slice(),e.query=s.query,e.fragment="",e.cannotBeABaseURL=!0,u=Ae;break}u="file"==s.scheme?ye:le;continue;case oe:if("/"!=i||"/"!=a[h+1]){u=le;continue}u=he,h++;break;case ce:if("/"==i){u=de;break}u=Pe;continue;case le:if(e.scheme=s.scheme,i==n)e.username=s.username,e.password=s.password,e.host=s.host,e.port=s.port,e.path=s.path.slice(),e.query=s.query;else if("/"==i||"\\"==i&&Q(e))u=ue;else if("?"==i)e.username=s.username,e.password=s.password,e.host=s.host,e.port=s.port,e.path=s.path.slice(),e.query="",u=we;else{if("#"!=i){e.username=s.username,e.password=s.password,e.host=s.host,e.port=s.port,e.path=s.path.slice(),e.path.pop(),u=Pe;continue}e.username=s.username,e.password=s.password,e.host=s.host,e.port=s.port,e.path=s.path.slice(),e.query=s.query,e.fragment="",u=Ae}break;case ue:if(!Q(e)||"/"!=i&&"\\"!=i){if("/"!=i){e.username=s.username,e.password=s.password,e.host=s.host,e.port=s.port,u=Pe;continue}u=de}else u=he;break;case pe:if(u=he,"/"!=i||"/"!=f.charAt(h+1))continue;h++;break;case he:if("/"!=i&&"\\"!=i){u=de;continue}break;case de:if("@"==i){m&&(f="%40"+f),m=!0,o=d(f);for(var v=0;v<o.length;v++){var b=o[v];if(":"!=b||y){var x=W(b,G);y?e.password+=x:e.username+=x}else y=!0}f=""}else if(i==n||"/"==i||"?"==i||"#"==i||"\\"==i&&Q(e)){if(m&&""==f)return"Invalid authority";h-=d(f).length+1,f="",u=fe}else f+=i;break;case fe:case me:if(r&&"file"==e.scheme){u=be;continue}if(":"!=i||g){if(i==n||"/"==i||"?"==i||"#"==i||"\\"==i&&Q(e)){if(Q(e)&&""==f)return L;if(r&&""==f&&(Z(e)||null!==e.port))return;if(c=Y(e,f))return c;if(f="",u=xe,r)return;continue}"["==i?g=!0:"]"==i&&(g=!1),f+=i}else{if(""==f)return L;if(c=Y(e,f))return c;if(f="",u=ge,r==me)return}break;case ge:if(!F.test(i)){if(i==n||"/"==i||"?"==i||"#"==i||"\\"==i&&Q(e)||r){if(""!=f){var P=parseInt(f,10);if(P>65535)return E;e.port=Q(e)&&P===K[e.scheme]?null:P,f=""}if(r)return;u=xe;continue}return E}f+=i;break;case ye:if(e.scheme="file","/"==i||"\\"==i)u=ve;else{if(!s||"file"!=s.scheme){u=Pe;continue}if(i==n)e.host=s.host,e.path=s.path.slice(),e.query=s.query;else if("?"==i)e.host=s.host,e.path=s.path.slice(),e.query="",u=we;else{if("#"!=i){te(a.slice(h).join(""))||(e.host=s.host,e.path=s.path.slice(),re(e)),u=Pe;continue}e.host=s.host,e.path=s.path.slice(),e.query=s.query,e.fragment="",u=Ae}}break;case ve:if("/"==i||"\\"==i){u=be;break}s&&"file"==s.scheme&&!te(a.slice(h).join(""))&&(ee(s.path[0],!0)?e.path.push(s.path[0]):e.host=s.host),u=Pe;continue;case be:if(i==n||"/"==i||"\\"==i||"?"==i||"#"==i){if(!r&&ee(f))u=Pe;else if(""==f){if(e.host="",r)return;u=xe}else{if(c=Y(e,f))return c;if("localhost"==e.host&&(e.host=""),r)return;f="",u=xe}continue}f+=i;break;case xe:if(Q(e)){if(u=Pe,"/"!=i&&"\\"!=i)continue}else if(r||"?"!=i)if(r||"#"!=i){if(i!=n&&(u=Pe,"/"!=i))continue}else e.fragment="",u=Ae;else e.query="",u=we;break;case Pe:if(i==n||"/"==i||"\\"==i&&Q(e)||!r&&("?"==i||"#"==i)){if(".."===(l=(l=f).toLowerCase())||"%2e."===l||".%2e"===l||"%2e%2e"===l?(re(e),"/"==i||"\\"==i&&Q(e)||e.path.push("")):ne(f)?"/"==i||"\\"==i&&Q(e)||e.path.push(""):("file"==e.scheme&&!e.path.length&&ee(f)&&(e.host&&(e.host=""),f=f.charAt(0)+":"),e.path.push(f)),f="","file"==e.scheme&&(i==n||"?"==i||"#"==i))for(;e.path.length>1&&""===e.path[0];)e.path.shift();"?"==i?(e.query="",u=we):"#"==i&&(e.fragment="",u=Ae)}else f+=W(i,$);break;case _e:"?"==i?(e.query="",u=we):"#"==i?(e.fragment="",u=Ae):i!=n&&(e.path[0]+=W(i,H));break;case we:r||"#"!=i?i!=n&&("'"==i&&Q(e)?e.query+="%27":e.query+="#"==i?"%23":W(i,H)):(e.fragment="",u=Ae);break;case Ae:i!=n&&(e.fragment+=W(i,z))}h++}},Se=function(e){var t,r,n=u(this,Se,"URL"),s=arguments.length>1?arguments[1]:void 0,i=g(e),o=w(n,{type:"URL"});if(void 0!==s)if(s instanceof Se)t=A(s);else if(r=Re(t={},g(s)))throw TypeError(r);if(r=Re(o,i,null,t))throw TypeError(r);var c=o.searchParams=new P,l=_(c);l.updateSearchParams(o.query),l.updateURL=function(){o.query=String(c)||null},a||(n.href=Le.call(n),n.origin=Ee.call(n),n.protocol=Oe.call(n),n.username=Ce.call(n),n.password=Fe.call(n),n.host=De.call(n),n.hostname=je.call(n),n.port=ke.call(n),n.pathname=Ue.call(n),n.search=qe.call(n),n.searchParams=Ne.call(n),n.hash=Ie.call(n))},Te=Se.prototype,Le=function(){var e=A(this),t=e.scheme,r=e.username,n=e.password,s=e.host,a=e.port,i=e.path,o=e.query,c=e.fragment,l=t+":";return null!==s?(l+="//",Z(e)&&(l+=r+(n?":"+n:"")+"@"),l+=X(s),null!==a&&(l+=":"+a)):"file"==t&&(l+="//"),l+=e.cannotBeABaseURL?i[0]:i.length?"/"+i.join("/"):"",null!==o&&(l+="?"+o),null!==c&&(l+="#"+c),l},Ee=function(){var e=A(this),t=e.scheme,r=e.port;if("blob"==t)try{return new Se(t.path[0]).origin}catch(e){return"null"}return"file"!=t&&Q(e)?t+"://"+X(e.host)+(null!==r?":"+r:""):"null"},Oe=function(){return A(this).scheme+":"},Ce=function(){return A(this).username},Fe=function(){return A(this).password},De=function(){var e=A(this),t=e.host,r=e.port;return null===t?"":null===r?X(t):X(t)+":"+r},je=function(){var e=A(this).host;return null===e?"":X(e)},ke=function(){var e=A(this).port;return null===e?"":String(e)},Ue=function(){var e=A(this),t=e.path;return e.cannotBeABaseURL?t[0]:t.length?"/"+t.join("/"):""},qe=function(){var e=A(this).query;return e?"?"+e:""},Ne=function(){return A(this).searchParams},Ie=function(){var e=A(this).fragment;return e?"#"+e:""},Ve=function(e,t){return{get:e,set:t,configurable:!0,enumerable:!0}};if(a&&c(Te,{href:Ve(Le,(function(e){var t=A(this),r=g(e),n=Re(t,r);if(n)throw TypeError(n);_(t.searchParams).updateSearchParams(t.query)})),origin:Ve(Ee),protocol:Ve(Oe,(function(e){var t=A(this);Re(t,g(e)+":",se)})),username:Ve(Ce,(function(e){var t=A(this),r=d(g(e));if(!J(t)){t.username="";for(var n=0;n<r.length;n++)t.username+=W(r[n],G)}})),password:Ve(Fe,(function(e){var t=A(this),r=d(g(e));if(!J(t)){t.password="";for(var n=0;n<r.length;n++)t.password+=W(r[n],G)}})),host:Ve(De,(function(e){var t=A(this);t.cannotBeABaseURL||Re(t,g(e),fe)})),hostname:Ve(je,(function(e){var t=A(this);t.cannotBeABaseURL||Re(t,g(e),me)})),port:Ve(ke,(function(e){var t=A(this);J(t)||(""==(e=g(e))?t.port=null:Re(t,e,ge))})),pathname:Ve(Ue,(function(e){var t=A(this);t.cannotBeABaseURL||(t.path=[],Re(t,g(e),xe))})),search:Ve(qe,(function(e){var t=A(this);""==(e=g(e))?t.query=null:("?"==e.charAt(0)&&(e=e.slice(1)),t.query="",Re(t,e,we)),_(t.searchParams).updateSearchParams(t.query)})),searchParams:Ve(Ne),hash:Ve(Ie,(function(e){var t=A(this);""!=(e=g(e))?("#"==e.charAt(0)&&(e=e.slice(1)),t.fragment="",Re(t,e,Ae)):t.fragment=null}))}),l(Te,"toJSON",(function(){return Le.call(this)}),{enumerable:!0}),l(Te,"toString",(function(){return Le.call(this)}),{enumerable:!0}),x){var Ye=x.createObjectURL,Me=x.revokeObjectURL;Ye&&l(Se,"createObjectURL",(function(e){return Ye.apply(x,arguments)})),Me&&l(Se,"revokeObjectURL",(function(e){return Me.apply(x,arguments)}))}y(Se,"URL"),s({global:!0,forced:!i,sham:!a},{URL:Se})}},t={};function r(n){var s=t[n];if(void 0!==s)return s.exports;var a=t[n]={exports:{}};return e[n](a,a.exports,r),a.exports}r.d=(e,t)=>{for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var n={};return(()=>{"use strict";r.r(n),r.d(n,{debug:()=>E,default:()=>se,namespaces:()=>e});var e={};r.r(e),r.d(e,{APPLE:()=>l,CALENDARSERVER:()=>u,DAV:()=>s,IETF_CALDAV:()=>a,IETF_CARDDAV:()=>i,NEXTCLOUD:()=>c,NS_MAP:()=>h,OWNCLOUD:()=>o,SABREDAV:()=>p,resolve:()=>d}),r(3948);class t{constructor(){this._parser={},this._registerDefaultParsers()}canParse(e){return Object.prototype.hasOwnProperty.call(this._parser,e)}parse(e,t,r){const n="{".concat(t.namespaceURI,"}").concat(t.localName);if(!this.canParse(n))throw new Error('Unable to parse unknown property "'.concat(n,'"'));return this._parser[n](e,t,r)}registerParser(e,t){this._parser[e]=t}unregisterParser(e){delete this._parser[e]}_registerDefaultParsers(){this.registerParser("{DAV:}displayname",t.text),this.registerParser("{DAV:}creationdate",t.text),this.registerParser("{DAV:}getcontentlength",t.decInt),this.registerParser("{DAV:}getcontenttype",t.text),this.registerParser("{DAV:}getcontentlanguage",t.text),this.registerParser("{DAV:}getlastmodified",t.rfc1123Date),this.registerParser("{DAV:}getetag",t.text),this.registerParser("{DAV:}resourcetype",t.resourceType),this.registerParser("{DAV:}inherited-acl-set",t.hrefs),this.registerParser("{DAV:}group",t.href),this.registerParser("{DAV:}owner",t.href),this.registerParser("{DAV:}current-user-privilege-set",t.privileges),this.registerParser("{DAV:}principal-collection-set",t.hrefs),this.registerParser("{DAV:}principal-URL",t.href),this.registerParser("{DAV:}alternate-URI-set",t.hrefs),this.registerParser("{DAV:}group-member-set",t.hrefs),this.registerParser("{DAV:}group-membership",t.hrefs),this.registerParser("{DAV:}current-user-principal",t.currentUserPrincipal),this.registerParser("{DAV:}sync-token",t.text),this.registerParser("{urn:ietf:params:xml:ns:carddav}address-data",t.text),this.registerParser("{urn:ietf:params:xml:ns:carddav}addressbook-description",t.text),this.registerParser("{urn:ietf:params:xml:ns:carddav}supported-address-data",t.addressDataTypes),this.registerParser("{urn:ietf:params:xml:ns:carddav}max-resource-size",t.decInt),this.registerParser("{urn:ietf:params:xml:ns:carddav}addressbook-home-set",t.hrefs),this.registerParser("{urn:ietf:params:xml:ns:carddav}principal-address",t.href),this.registerParser("{urn:ietf:params:xml:ns:carddav}supported-collation-set",t.supportedCardDAVCollations),this.registerParser("{urn:ietf:params:xml:ns:caldav}calendar-data",t.text),this.registerParser("{urn:ietf:params:xml:ns:caldav}calendar-home-set",t.hrefs),this.registerParser("{urn:ietf:params:xml:ns:caldav}calendar-description",t.text),this.registerParser("{urn:ietf:params:xml:ns:caldav}calendar-timezone",t.text),this.registerParser("{urn:ietf:params:xml:ns:caldav}supported-calendar-component-set",t.calendarComps),this.registerParser("{urn:ietf:params:xml:ns:caldav}supported-calendar-data",t.calendarDatas),this.registerParser("{urn:ietf:params:xml:ns:caldav}max-resource-size",t.decInt),this.registerParser("{urn:ietf:params:xml:ns:caldav}min-date-time",t.iCalendarTimestamp),this.registerParser("{urn:ietf:params:xml:ns:caldav}max-date-time",t.iCalendarTimestamp),this.registerParser("{urn:ietf:params:xml:ns:caldav}max-instances",t.decInt),this.registerParser("{urn:ietf:params:xml:ns:caldav}max-attendees-per-instance",t.decInt),this.registerParser("{urn:ietf:params:xml:ns:caldav}supported-collation-set",t.supportedCalDAVCollations),this.registerParser("{urn:ietf:params:xml:ns:caldav}schedule-outbox-URL",t.href),this.registerParser("{urn:ietf:params:xml:ns:caldav}schedule-inbox-URL",t.href),this.registerParser("{urn:ietf:params:xml:ns:caldav}calendar-user-address-set",t.hrefs),this.registerParser("{urn:ietf:params:xml:ns:caldav}calendar-user-type",t.text),this.registerParser("{urn:ietf:params:xml:ns:caldav}schedule-calendar-transp",t.scheduleCalendarTransp),this.registerParser("{urn:ietf:params:xml:ns:caldav}schedule-default-calendar-URL",t.href),this.registerParser("{urn:ietf:params:xml:ns:caldav}schedule-tag",t.text),this.registerParser("{urn:ietf:params:xml:ns:caldav}timezone-service-set",t.hrefs),this.registerParser("{urn:ietf:params:xml:ns:caldav}calendar-timezone-id",t.text),this.registerParser("{urn:ietf:params:xml:ns:caldav}calendar-availability",t.text),this.registerParser("{http://apple.com/ns/ical/}calendar-order",t.decInt),this.registerParser("{http://apple.com/ns/ical/}calendar-color",t.color),this.registerParser("{http://calendarserver.org/ns/}source",t.href),this.registerParser("{urn:ietf:params:xml:ns:caldav}default-alarm-vevent-datetime",t.text),this.registerParser("{urn:ietf:params:xml:ns:caldav}default-alarm-vevent-date",t.text),this.registerParser("{urn:ietf:params:xml:ns:caldav}default-alarm-vtodo-datetime",t.text),this.registerParser("{urn:ietf:params:xml:ns:caldav}default-alarm-vtodo-date",t.text),this.registerParser("{http://calendarserver.org/ns/}getctag",t.text),this.registerParser("{http://calendarserver.org/ns/}calendar-proxy-read-for",t.hrefs),this.registerParser("{http://calendarserver.org/ns/}calendar-proxy-write-for",t.hrefs),this.registerParser("{http://calendarserver.org/ns/}allowed-sharing-modes",t.allowedSharingModes),this.registerParser("{http://calendarserver.org/ns/}shared-url",t.href),this.registerParser("{http://sabredav.org/ns}owner-principal",t.href),this.registerParser("{http://sabredav.org/ns}read-only",t.bool),this.registerParser("{http://calendarserver.org/ns/}pre-publish-url",t.href),this.registerParser("{http://calendarserver.org/ns/}publish-url",t.href),this.registerParser("{http://owncloud.org/ns}invite",t.ocInvite),this.registerParser("{http://owncloud.org/ns}calendar-enabled",t.bool),this.registerParser("{http://owncloud.org/ns}enabled",t.bool),this.registerParser("{http://owncloud.org/ns}read-only",t.bool),this.registerParser("{http://nextcloud.com/ns}owner-displayname",t.text),this.registerParser("{http://nextcloud.com/ns}deleted-at",t.iso8601DateTime),this.registerParser("{http://nextcloud.com/ns}calendar-uri",t.text),this.registerParser("{http://nextcloud.com/ns}has-photo",t.bool),this.registerParser("{http://nextcloud.com/ns}trash-bin-retention-duration",t.decInt),this.registerParser("{http://nextcloud.com/ns}language",t.text),this.registerParser("{http://nextcloud.com/ns}room-type",t.text),this.registerParser("{http://nextcloud.com/ns}room-seating-capacity",t.decInt),this.registerParser("{http://nextcloud.com/ns}room-building-address",t.text),this.registerParser("{http://nextcloud.com/ns}room-building-story",t.text),this.registerParser("{http://nextcloud.com/ns}room-building-room-number",t.text),this.registerParser("{http://nextcloud.com/ns}room-features",t.text),this.registerParser("{http://sabredav.org/ns}email-address",t.text)}static text(e,t,r){return e.evaluate("string(.)",t,r,XPathResult.ANY_TYPE,null).stringValue}static bool(e,r,n){return"1"===t.text(e,r,n)}static decInt(e,r,n){return parseInt(t.text(e,r,n),10)}static rfc1123Date(e,r,n){const s=t.text(e,r,n);return new Date(s)}static iso8601DateTime(e,r,n){const s=t.text(e,r,n);return new Date(s)}static iCalendarTimestamp(e,r,n){const s=t.text(e,r,n),a=parseInt(s.substr(0,4),10),i=parseInt(s.substr(4,2),10)-1,o=parseInt(s.substr(6,2),10),c=parseInt(s.substr(9,2),10),l=parseInt(s.substr(11,2),10),u=parseInt(s.substr(13,2),10),p=new Date;return p.setUTCFullYear(a,i,o),p.setUTCHours(c,l,u,0),p}static resourceType(e,t,r){const n=[],s=e.evaluate("*",t,r,XPathResult.ANY_TYPE,null);let a;for(;null!==(a=s.iterateNext());){const t=e.evaluate("namespace-uri(.)",a,r,XPathResult.ANY_TYPE,null).stringValue,s=e.evaluate("local-name(.)",a,r,XPathResult.ANY_TYPE,null).stringValue;n.push("{".concat(t,"}").concat(s))}return n}static href(e,t,r){return e.evaluate("string(d:href)",t,r,XPathResult.ANY_TYPE,null).stringValue}static hrefs(e,t,r){const n=[],s=e.evaluate("d:href",t,r,XPathResult.ANY_TYPE,null);let a;for(;null!==(a=s.iterateNext());)n.push(e.evaluate("string(.)",a,r,XPathResult.ANY_TYPE,null).stringValue);return n}static privileges(e,t,r){const n=[],s=e.evaluate("d:privilege/*",t,r,XPathResult.ANY_TYPE,null);let a;for(;null!==(a=s.iterateNext());){const t=e.evaluate("namespace-uri(.)",a,r,XPathResult.ANY_TYPE,null).stringValue,s=e.evaluate("local-name(.)",a,r,XPathResult.ANY_TYPE,null).stringValue;n.push("{".concat(t,"}").concat(s))}return n}static currentUserPrincipal(e,r,n){return 0!==e.evaluate("count(d:unauthenticated)",r,n,XPathResult.ANY_TYPE,null).numberValue?{type:"unauthenticated",href:null}:{type:"href",href:t.href(...arguments)}}static addressDataTypes(e,t,r){const n=[],s=e.evaluate("cr:address-data-type",t,r,XPathResult.ANY_TYPE,null);let a;for(;null!==(a=s.iterateNext());)n.push({"content-type":e.evaluate("string(@content-type)",a,r,XPathResult.ANY_TYPE,null).stringValue,version:e.evaluate("string(@version)",a,r,XPathResult.ANY_TYPE,null).stringValue});return n}static supportedCardDAVCollations(e,t,r){const n=[],s=e.evaluate("cr:supported-collation",t,r,XPathResult.ANY_TYPE,null);let a;for(;null!==(a=s.iterateNext());)n.push(e.evaluate("string(.)",a,r,XPathResult.ANY_TYPE,null).stringValue);return n}static supportedCalDAVCollations(e,t,r){const n=[],s=e.evaluate("cl:supported-collation",t,r,XPathResult.ANY_TYPE,null);let a;for(;null!==(a=s.iterateNext());)n.push(e.evaluate("string(.)",a,r,XPathResult.ANY_TYPE,null).stringValue);return n}static calendarComps(e,t,r){const n=[],s=e.evaluate("cl:comp",t,r,XPathResult.ANY_TYPE,null);let a;for(;null!==(a=s.iterateNext());)n.push(e.evaluate("string(@name)",a,r,XPathResult.ANY_TYPE,null).stringValue);return n}static calendarDatas(e,t,r){const n=[],s=e.evaluate("cl:calendar-data",t,r,XPathResult.ANY_TYPE,null);let a;for(;null!==(a=s.iterateNext());)n.push({"content-type":e.evaluate("string(@content-type)",a,r,XPathResult.ANY_TYPE,null).stringValue,version:e.evaluate("string(@version)",a,r,XPathResult.ANY_TYPE,null).stringValue});return n}static scheduleCalendarTransp(e,t,r){const n=e.evaluate("cl:opaque | cl:transparent",t,r,XPathResult.ANY_TYPE,null).iterateNext();if(n)return e.evaluate("local-name(.)",n,r,XPathResult.ANY_TYPE,null).stringValue}static color(e,r,n){const s=t.text(e,r,n);return 9===s.length?s.substr(0,7):s}static allowedSharingModes(e,t,r){const n=[],s=e.evaluate("cs:can-be-shared | cs:can-be-published",t,r,XPathResult.ANY_TYPE,null);let a;for(;null!==(a=s.iterateNext());){const t=e.evaluate("namespace-uri(.)",a,r,XPathResult.ANY_TYPE,null).stringValue,s=e.evaluate("local-name(.)",a,r,XPathResult.ANY_TYPE,null).stringValue;n.push("{".concat(t,"}").concat(s))}return n}static ocInvite(e,r,n){const s=[],a=e.evaluate("oc:user",r,n,XPathResult.ANY_TYPE,null);let i;for(;null!==(i=a.iterateNext());)s.push({href:t.href(e,i,n),"common-name":e.evaluate("string(oc:common-name)",i,n,XPathResult.ANY_TYPE,null).stringValue,"invite-accepted":1===e.evaluate("count(oc:invite-accepted)",i,n,XPathResult.ANY_TYPE,null).numberValue,access:t.ocAccess(e,i,n)});return s}static ocAccess(e,t,r){const n=[],s=e.evaluate("oc:access/*",t,r,XPathResult.ANY_TYPE,null);let a;for(;null!==(a=s.iterateNext());){const t=e.evaluate("namespace-uri(.)",a,r,XPathResult.ANY_TYPE,null).stringValue,s=e.evaluate("local-name(.)",a,r,XPathResult.ANY_TYPE,null).stringValue;n.push("{".concat(t,"}").concat(s))}return n}}r(285);const s="DAV:",a="urn:ietf:params:xml:ns:caldav",i="urn:ietf:params:xml:ns:carddav",o="http://owncloud.org/ns",c="http://nextcloud.com/ns",l="http://apple.com/ns/ical/",u="http://calendarserver.org/ns/",p="http://sabredav.org/ns",h={d:s,cl:a,cr:i,oc:o,nc:c,aapl:l,cs:u,sd:p};function d(e){return h[e]||null}const f=new XMLSerializer;let m={};function g(){if(0===arguments.length)return[{},null];const e={name:arguments[0],children:[]};let t=e.children;const r=Array.prototype.slice.call(arguments,1);return r.forEach((function(e){const r={name:e,children:[]};t.push(r),t=r.children})),[e,t]}function y(e){if("object"!=typeof(e=e||{})||!Object.prototype.hasOwnProperty.call(e,"name"))return"";const t=document.implementation.createDocument("","",null);return v(t,t,e),f.serializeToString(t)}function v(e,t,r){const[n,s]=r.name,a=e.createElementNS(n,function(e,t){return Object.prototype.hasOwnProperty.call(m,e)||(m[e]="x"+Object.keys(m).length),m[e]+":"+t}(n,s));r.attributes=r.attributes||[],r.attributes.forEach((e=>{if(2===e.length){const[t,r]=e;a.setAttribute(t,r)}else{const[t,r,n]=e;a.setAttributeNS(t,r,n)}})),r.value?a.textContent=r.value:r.children&&r.children.forEach((t=>{v(e,a,t)})),t.appendChild(a)}class b extends Error{constructor(e){super(),Object.assign(this,e)}}class x extends b{}class P extends b{}class _ extends b{}class w extends _{}class A extends _{}class R{constructor(e,t,r=(()=>new XMLHttpRequest)){this.baseUrl=e,this.parser=t,this.xhrProvider=r}async get(e,t={},r=null,n=(()=>null),s=(()=>null)){return this.request("GET",e,t,r,n,s)}async patch(e,t,r,n=(()=>null),s=(()=>null)){return this.request("PATCH",e,t,r,n,s)}async post(e,t,r,n=(()=>null),s=(()=>null)){return this.request("POST",e,t,r,n,s)}async put(e,t,r,n=(()=>null),s=(()=>null)){return this.request("PUT",e,t,r,n,s)}async delete(e,t={},r=null,n=(()=>null),s=(()=>null)){return this.request("DELETE",e,t,r,n,s)}async copy(e,t,r=0,n=!1,s={},a=null,i=(()=>null),o=(()=>null)){return s.Destination=t,s.Depth=r,s.Overwrite=n?"T":"F",this.request("COPY",e,s,a,i,o)}async move(e,t,r=!1,n={},s=null,a=(()=>null),i=(()=>null)){return n.Destination=t,n.Depth="Infinity",n.Overwrite=r?"T":"F",this.request("MOVE",e,n,s,a,i)}async lock(e,t={},r=null,n=(()=>null),s=(()=>null)){return this.request("LOCK",e,t,r,n,s)}async unlock(e,t={},r=null,n=(()=>null),s=(()=>null)){return this.request("UNLOCK",e,t,r,n,s)}async propFind(e,t,r=0,n={},a=(()=>null),i=(()=>null)){n.Depth=r;const[o,c]=g([s,"propfind"],[s,"prop"]);c.push(...t.map((e=>({name:e}))));const l=y(o);return this.request("PROPFIND",e,n,l,a,i)}async propPatch(e,t,r,n=(()=>null),s=(()=>null)){return this.request("PROPPATCH",e,t,r,n,s)}async mkCol(e,t,r,n=(()=>null),s=(()=>null)){return this.request("MKCOL",e,t,r,n,s)}async report(e,t,r,n=(()=>null),s=(()=>null)){return this.request("REPORT",e,t,r,n,s)}async request(e,t,r,n,s=(()=>null),a=(()=>null)){const i=this.xhrProvider(),o=Object.assign({},{Depth:"0","Content-Type":"application/xml; charset=utf-8"},r);i.open(e,this.absoluteUrl(t),!0);for(const e in o)i.setRequestHeader(e,o[e]);return s(i),null==n?i.send():i.send(n),new Promise(((t,r)=>{i.onreadystatechange=()=>{if(4!==i.readyState)return;a(i);let n=i.response;if(!S(i.status))return i.status>=400&&i.status<500?void r(new A({body:n,status:i.status,xhr:i})):i.status>=500&&i.status<600?void r(new w({body:n,status:i.status,xhr:i})):void r(new _({body:n,status:i.status,xhr:i}));207===i.status&&(n=this._parseMultiStatusResponse(n),0===parseInt(o.Depth,10)&&"PROPFIND"===e&&(n=n[Object.keys(n)[0]])),t({body:n,status:i.status,xhr:i})},i.onerror=()=>r(new P({body:null,status:-1,xhr:i})),i.onabort=()=>r(new x({body:null,status:-1,xhr:i}))}))}filename(e){let t=this.pathname(e);"/"===t.substr(-1)&&(t=t.substr(0,t.length-1));const r=t.lastIndexOf("/");return t.substr(r)}pathname(e){return new URL(e,this.baseUrl).pathname}absoluteUrl(e){return new URL(e,this.baseUrl).href}_parseMultiStatusResponse(e){const t={},r=(new DOMParser).parseFromString(e,"application/xml"),n=r.evaluate("/d:multistatus/d:response",r,d,XPathResult.ANY_TYPE,null);let s;for(;null!==(s=n.iterateNext());){const e=r.evaluate("string(d:href)",s,d,XPathResult.ANY_TYPE,null).stringValue,n={},i=r.evaluate("d:propstat",s,d,XPathResult.ANY_TYPE,null);let o;for(;null!==(o=i.iterateNext());){if(!S((a=r.evaluate("string(d:status)",o,d,XPathResult.ANY_TYPE,null).stringValue,parseInt(a.split(" ")[1],10))))continue;const e=r.evaluate("d:prop/*",o,d,XPathResult.ANY_TYPE,null);let t;for(;null!==(t=e.iterateNext());)this.parser.canParse("{".concat(t.namespaceURI,"}").concat(t.localName))&&(n["{".concat(t.namespaceURI,"}").concat(t.localName)]=this.parser.parse(r,t,d))}t[e]=n}var a;return t}}function S(e){return e>=200&&e<300}function T(e,t){return""!==(e=e||"")&&(e+="-"),""!==(t=t||"")&&(t="."+t),e+"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){const t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16).toUpperCase()}))+t}r(5306);class L{constructor(){this._eventListeners={}}addEventListener(e,t,r=null){this._eventListeners[e]=this._eventListeners[e]||[],this._eventListeners[e].push({listener:t,options:r})}removeEventListener(e,t){if(!this._eventListeners[e])return;const r=this._eventListeners[e].findIndex((({listener:e})=>e===t));-1!==r&&this._eventListeners[e].splice(r,1)}dispatchEvent(e,t){if(!this._eventListeners[e])return;const r=[],n=[];this._eventListeners[e].forEach((({listener:e,options:t})=>{t&&t.once?n.push(e):r.push(e)})),n.forEach((r=>{this.removeEventListener(e,r),r(t)})),r.forEach((e=>{e(t)}))}}function E(e){return(...t)=>{E.enabled&&console.debug(e,...t)}}function O(e){const t=[];return Object.entries(e).forEach((([e,r])=>{switch(e){case"{DAV:}displayname":t.push({name:[s,"displayname"],value:r})}})),t}E.enabled=!1;const C=E("DavObject");class F extends L{constructor(e,t,r,n,a=!1){super(),Object.assign(this,{_parent:e,_request:t,_url:r,_props:n,_isPartial:a,_isDirty:!1}),this._exposeProperty("etag",s,"getetag",!0),this._exposeProperty("contenttype",s,"getcontenttype"),Object.defineProperty(this,"url",{get:()=>this._url})}async fetchCompleteData(e=!1){if(!e&&!this.isPartial())return;const t=await this._request.propFind(this._url,this.constructor.getPropFindList(),0);this._props=t.body,this._isDirty=!1,this._isPartial=!1}async copy(e,t=!1,r={}){if(C("copying ".concat(this.url," from ").concat(this._parent.url," to ").concat(e.url)),this._parent===e)throw new Error("Copying an object to the collection it's already part of is not supported");if(!this._parent.isSameCollectionTypeAs(e))throw new Error("Copying an object to a collection of a different type is not supported");if(!e.isWriteable())throw new Error("Can not copy object into read-only destination collection");const n=this.url.split("/").splice(-1,1)[0],s=e.url+n;return await this._request.copy(this.url,s,0,t,r),e.find(n)}async move(e,t=!1,r={}){if(C("moving ".concat(this.url," from ").concat(this._parent.url," to ").concat(e.url)),this._parent===e)throw new Error("Moving an object to the collection it's already part of is not supported");if(!this._parent.isSameCollectionTypeAs(e))throw new Error("Moving an object to a collection of a different type is not supported");if(!e.isWriteable())throw new Error("Can not move object into read-only destination collection");const n=this.url.split("/").splice(-1,1)[0],s=e.url+n;await this._request.move(this.url,s,t,r),this._parent=e,this._url=s}async update(){if(this.isPartial()||!this.isDirty()||!this.data)return;const e={};return this.contenttype&&(e["Content-Type"]="".concat(this.contenttype,"; charset=utf-8")),this.etag&&(e["If-Match"]=this.etag),this._request.put(this.url,e,this.data).then((e=>{this._isDirty=!1,this._props["{DAV:}getetag"]=e.xhr.getResponseHeader("etag")})).catch((e=>{throw this._isDirty=!0,e instanceof A&&412===e.status&&(this._isPartial=!0),e}))}async delete(e={}){return this._request.delete(this.url,e)}isPartial(){return this._isPartial}isDirty(){return this._isDirty}_exposeProperty(e,t,r,n=!1){n?Object.defineProperty(this,e,{get:()=>this._props["{".concat(t,"}").concat(r)],set:e=>{this._isDirty=!0,this._props["{".concat(t,"}").concat(r)]=e}}):Object.defineProperty(this,e,{get:()=>this._props["{".concat(t,"}").concat(r)]})}static getPropFindList(){return[[s,"getcontenttype"],[s,"getetag"],[s,"resourcetype"]]}}const D=E("DavCollection");class j extends L{constructor(e,t,r,n){super(),"/"!==r.substr(-1)&&(r+="/"),Object.assign(this,{_parent:e,_request:t,_url:r,_props:n,_collectionFactoryMapper:{},_objectFactoryMapper:{},_updatedProperties:[],_childrenNames:[],_propFindList:[],_propSetFactory:[]}),this._registerPropSetFactory(O),this._exposeProperty("displayname",s,"displayname",!0),this._exposeProperty("owner",s,"owner"),this._exposeProperty("resourcetype",s,"resourcetype"),this._exposeProperty("syncToken",s,"sync-token"),this._exposeProperty("currentUserPrivilegeSet",s,"current-user-privilege-set"),Object.defineProperty(this,"url",{get:()=>this._url}),this._propFindList.push(...F.getPropFindList()),this._propFindList.push(...j.getPropFindList())}async findAll(){const e=await this._request.propFind(this._url,this._propFindList,1);return this._handleMultiStatusResponse(e,!1)}async findAllByFilter(e){return(await this.findAll()).filter(e)}async find(e){const t=await this._request.propFind(this._url+e,this._propFindList,0);return t.body={[this._url+e]:t.body},this._handleMultiStatusResponse(t,!1)[0]}async createCollection(e,t=null){D("creating a collection"),t||(t=[{name:[s,"resourcetype"],children:[{name:[s,"collection"]}]}]);const[r,n]=g([s,"mkcol"],[s,"set"],[s,"prop"]);n.push(...t);const a=this._getAvailableNameFromToken(e),i=y(r);return await this._request.mkCol(this.url+a,{},i),this.find(a+"/")}async createObject(e,t,r){return D("creating an object"),await this._request.put(this.url+e,t,r),this.find(e)}async update(){if(0===this._updatedProperties.length)return;const e={};this._updatedProperties.forEach((t=>{e[t]=this._props[t]}));const t=this._propSetFactory.reduce(((t,r)=>[...t,...r(e)]),[]),[r,n]=g([s,"propertyupdate"],[s,"set"],[s,"prop"]);n.push(...t);const a=y(r);await this._request.propPatch(this._url,{},a)}async delete(e={}){await this._request.delete(this._url,e)}isReadable(){return this.currentUserPrivilegeSet.includes("{DAV:}read")}isWriteable(){return this.currentUserPrivilegeSet.includes("{DAV:}write")}isSameCollectionTypeAs(e){const t=this.resourcetype,r=e.resourcetype,n=t.find((e=>-1===r.indexOf(e))),s=r.find((e=>-1===t.indexOf(e)));return void 0===n&&void 0===s}_registerCollectionFactory(e,t){this._collectionFactoryMapper[e]=t,"function"==typeof t.getPropFindList&&this._propFindList.push(...t.getPropFindList())}_registerObjectFactory(e,t){this._objectFactoryMapper[e]=t,"function"==typeof t.getPropFindList&&this._propFindList.push(...t.getPropFindList())}_registerPropSetFactory(e){this._propSetFactory.push(e)}_exposeProperty(e,t,r,n=!1){n?Object.defineProperty(this,e,{get:()=>this._props["{".concat(t,"}").concat(r)],set:e=>{this._props["{".concat(t,"}").concat(r)]=e,-1===this._updatedProperties.indexOf("{".concat(t,"}").concat(r))&&this._updatedProperties.push("{".concat(t,"}").concat(r))}}):Object.defineProperty(this,e,{get:()=>this._props["{".concat(t,"}").concat(r)]})}_getAvailableNameFromToken(e){return function(e,t){let r=(e=e||"").toString().toLowerCase().replace(/\s+/g,"-").replace(/[^\w-]+/g,"").replace(/--+/g,"-").replace(/^-+/,"").replace(/-+$/,"");if(""===r&&(r="-"),t(r))return r;if(-1===r.indexOf("-")&&(r+="-1",t(r)))return r;do{const e=r.lastIndexOf("-"),t=r.substr(0,e);let n=r.substr(e+1);n.match(/^\d+$/)?(n=parseInt(n),n++,r=t+"-"+n):r+="-1"}while(!1===t(r));return r}(e,(e=>-1===this._childrenNames.indexOf(this._url+e)&&-1===this._childrenNames.indexOf(this._url+e+"/")))}async _updatePropsFromServer(){const e=await this._request.propFind(this.url,this.constructor.getPropFindList());this._props=e.body}_handleMultiStatusResponse(e,t=!1){const r=[],n=[];return Object.entries(e.body).forEach((([e,a])=>{if(e===this._url||e+"/"===this.url)return;r.push(e);const i=this._request.pathname(e);if(a["{DAV:}resourcetype"]&&0!==a["{DAV:}resourcetype"].length){D("".concat(e," was identified as a collection"));const t=a["{DAV:}resourcetype"].find((e=>e!=="{".concat(s,"}collection")));if(!t)return D("Collection-type of ".concat(e," was not specified, treating as generic collection")),void n.push(new j(this,this._request,i,a));if(!this._collectionFactoryMapper[t])return D("No constructor for collection-type ".concat(t," (").concat(e,") registered, treating as generic collection")),void n.push(new j(this,this._request,i,a));n.push(new this._collectionFactoryMapper[t](this,this._request,i,a))}else{D("".concat(e," was identified as a file"));const r=a["{DAV:}getcontenttype"].split(";")[0];if(!this._objectFactoryMapper[r])return D("No constructor for content-type ".concat(r," (").concat(e,") registered, treating as generic object")),void n.push(new F(this,this._request,i,a));n.push(new this._objectFactoryMapper[r](this,this._request,i,a,t))}})),this._childrenNames.push(...r),n}static getPropFindList(){return[[s,"displayname"],[s,"owner"],[s,"resourcetype"],[s,"sync-token"],[s,"current-user-privilege-set"]]}}const k=E("DavCollectionPublishable"),U=E("DavCollectionShareable");function q(e){return class extends e{constructor(...e){super(...e),super._exposeProperty("shares",o,"invite"),super._exposeProperty("allowedSharingModes",u,"allowed-sharing-modes")}async share(e,t=!1,r=""){U("Sharing ".concat(this.url," with ").concat(e));const[n,a]=g([o,"share"],[o,"set"]);a.push({name:[s,"href"],value:e}),t&&a.push({name:[o,"read-write"]}),""!==r&&a.push({name:[o,"summary"],value:r});const i=y(n);return this._request.post(this._url,{"Content-Type":"application/xml; charset=utf-8"},i).then((()=>{const r=this.shares.findIndex((t=>t.href===e));-1===r?this.shares.push({href:e,access:[t?"{http://owncloud.org/ns}read-write":"{http://owncloud.org/ns}read"],"common-name":null,"invite-accepted":!0}):this.shares[r].access=[t?"{http://owncloud.org/ns}read-write":"{http://owncloud.org/ns}read"]}))}async unshare(e){U("Unsharing ".concat(this.url," with ").concat(e));const[t,r]=g([o,"share"],[o,"remove"]);r.push({name:[s,"href"],value:e});const n=y(t);return this._request.post(this._url,{"Content-Type":"application/xml; charset=utf-8"},n).then((()=>{const t=this.shares.findIndex((t=>t.href===e));-1!==t&&this.shares.splice(t,1)}))}isShareable(){return!!Array.isArray(this.allowedSharingModes)&&this.allowedSharingModes.includes("{".concat(u,"}can-be-shared"))}isPublishable(){return!!Array.isArray(this.allowedSharingModes)&&this.allowedSharingModes.includes("{".concat(u,"}can-be-published"))}static getPropFindList(){return super.getPropFindList().concat([[o,"invite"],[u,"allowed-sharing-modes"]])}}}class N extends F{constructor(...e){super(...e),super._exposeProperty("data",a,"calendar-data",!0)}static getPropFindList(){return super.getPropFindList().concat([[a,"calendar-data"]])}}function I(e){const t=[];return Object.entries(e).forEach((([e,r])=>{switch(e){case"{http://apple.com/ns/ical/}calendar-order":t.push({name:[l,"calendar-order"],value:r.toString()});break;case"{http://apple.com/ns/ical/}calendar-color":t.push({name:[l,"calendar-color"],value:r});break;case"{http://calendarserver.org/ns/}source":t.push({name:[u,"source"],children:[{name:[s,"href"],value:r}]});break;case"{urn:ietf:params:xml:ns:caldav}calendar-description":t.push({name:[a,"calendar-description"],value:r});break;case"{urn:ietf:params:xml:ns:caldav}calendar-timezone":t.push({name:[a,"calendar-timezone"],value:r});break;case"{http://owncloud.org/ns}calendar-enabled":t.push({name:[o,"calendar-enabled"],value:r?"1":"0"})}})),t}const V=E("Calendar");class Y extends(function(e){return class extends e{constructor(...e){super(...e),super._exposeProperty("publishURL",u,"publish-url")}async publish(){k("Publishing ".concat(this.url));const[e]=g([u,"publish-calendar"]),t=y(e);await this._request.post(this._url,{"Content-Type":"application/xml; charset=utf-8"},t),await this._updatePropsFromServer()}async unpublish(){k("Unpublishing ".concat(this.url));const[e]=g([u,"unpublish-calendar"]),t=y(e);await this._request.post(this._url,{"Content-Type":"application/xml; charset=utf-8"},t),delete this._props["{http://calendarserver.org/ns/}publish-url"]}static getPropFindList(){return super.getPropFindList().concat([[u,"publish-url"]])}}}(q(j))){constructor(...e){super(...e),super._registerObjectFactory("text/calendar",N),super._registerPropSetFactory(I),super._exposeProperty("color",l,"calendar-color",!0),super._exposeProperty("enabled",o,"calendar-enabled",!0),super._exposeProperty("order",l,"calendar-order",!0),super._exposeProperty("timezone",a,"calendar-timezone",!0),super._exposeProperty("components",a,"supported-calendar-component-set")}async findAllVObjects(){return super.findAllByFilter((e=>e instanceof N))}async findByType(e){return this.calendarQuery([{name:[a,"comp-filter"],attributes:[["name","VCALENDAR"]],children:[{name:[a,"comp-filter"],attributes:[["name",e]]}]}])}async findByTypeInTimeRange(e,t,r){return this.calendarQuery([{name:[a,"comp-filter"],attributes:[["name","VCALENDAR"]],children:[{name:[a,"comp-filter"],attributes:[["name",e]],children:[{name:[a,"time-range"],attributes:[["start",Y._getICalendarDateTimeFromDateObject(t)],["end",Y._getICalendarDateTimeFromDateObject(r)]]}]}]}])}async createVObject(e){const t=T("","ics");return super.createObject(t,{"Content-Type":"text/calendar; charset=utf-8"},e)}async calendarQuery(e,t=null,r=null){V("sending an calendar-query request");const[n]=g([a,"calendar-query"]);t?n.children.push({name:[s,"prop"],children:t}):n.children.push({name:[s,"prop"],children:this._propFindList.map((e=>({name:e})))}),e&&n.children.push({name:[a,"filter"],children:e}),r&&n.children.push({name:[a,"timezone"],value:r});const i=y(n),o=await this._request.report(this.url,{Depth:"1"},i);return super._handleMultiStatusResponse(o,Y._isRetrievalPartial(t))}async calendarMultiget(e=[],t){if(V("sending an calendar-multiget request"),0===e.length)return[];const[r]=g([a,"calendar-multiget"]);t?r.children.push({name:[s,"prop"],children:t}):r.children.push({name:[s,"prop"],children:this._propFindList.map((e=>({name:e})))}),e.forEach((e=>{r.children.push({name:[s,"href"],value:e})}));const n=y(r),i=await this._request.report(this.url,{Depth:"1"},n);return super._handleMultiStatusResponse(i,Y._isRetrievalPartial(t))}async freeBusyQuery(e,t){}static getPropFindList(){return super.getPropFindList().concat([[l,"calendar-order"],[l,"calendar-color"],[u,"getctag"],[a,"calendar-description"],[a,"calendar-timezone"],[a,"supported-calendar-component-set"],[a,"supported-calendar-data"],[a,"max-resource-size"],[a,"min-date-time"],[a,"max-date-time"],[a,"max-instances"],[a,"max-attendees-per-instance"],[a,"supported-collation-set"],[a,"calendar-free-busy-set"],[a,"schedule-calendar-transp"],[a,"schedule-default-calendar-URL"],[o,"calendar-enabled"],[c,"owner-displayname"],[c,"trash-bin-retention-duration"],[c,"deleted-at"]])}static _isRetrievalPartial(e){if(!e)return!1;const t=e.find((e=>e.name[0]===a&&"calendar-data"===e.name[1]));return!!t&&!!t.children}static _getICalendarDateTimeFromDateObject(e){return[e.getUTCFullYear(),("0"+(e.getUTCMonth()+1)).slice(-2),("0"+e.getUTCDate()).slice(-2),"T",("0"+e.getUTCHours()).slice(-2),("0"+e.getUTCMinutes()).slice(-2),("0"+e.getUTCSeconds()).slice(-2),"Z"].join("")}}class M extends Y{constructor(...e){super(...e),super._exposeProperty("source",u,"source",!0),super._exposeProperty("refreshRate",l,"refreshrate",!0),super._exposeProperty("stripTodos",u,"subscribed-strip-todos",!0),super._exposeProperty("stripAlarms",u,"subscribed-strip-alarms",!0),super._exposeProperty("stripAttachments",u,"subscribed-strip-attachments",!0)}static getPropFindList(){return super.getPropFindList().concat([[u,"source"],[l,"refreshrate"],[u,"subscribed-strip-todos"],[u,"subscribed-strip-alarms"],[u,"subscribed-strip-attachments"]])}}function B(e){const t=[];return Object.entries(e).forEach((([e,r])=>{switch(e){case"{urn:ietf:params:xml:ns:caldav}calendar-availability":t.push({name:[a,"calendar-availability"],value:r.toString()})}})),t}class X extends Y{constructor(...e){super(...e),super._registerPropSetFactory(B),super._exposeProperty("availability",a,"calendar-availability",!0)}static getPropFindList(){return super.getPropFindList().concat([[a,"calendar-availability"]])}}class H extends j{async freeBusyRequest(e){const t={},r=await this._request.post(this.url,{"Content-Type":'text/calendar; charset="utf-8"'},e),n=(new DOMParser).parseFromString(r.body,"application/xml"),s=n.evaluate("/cl:schedule-response/cl:response",n,d,XPathResult.ANY_TYPE,null);let a;for(;null!==(a=s.iterateNext());){const e=n.evaluate("string(cl:recipient/d:href)",a,d,XPathResult.ANY_TYPE,null).stringValue,r=n.evaluate("string(cl:request-status)",a,d,XPathResult.ANY_TYPE,null).stringValue,s=n.evaluate("string(cl:calendar-data)",a,d,XPathResult.ANY_TYPE,null).stringValue,i=/^2.\d(;.+)?$/.test(r);t[e]={calendarData:s,status:r,success:i}}return t}}class z extends j{constructor(...e){super(...e),super._registerObjectFactory("text/calendar",N),super._exposeProperty("retentionDuration",c,"trash-bin-retention-duration")}async findDeletedObjects(){const[e]=g([a,"calendar-query"]);e.children.push({name:[s,"prop"],children:N.getPropFindList().map((e=>({name:e}))).concat([{name:[c,"calendar-uri"]},{name:[c,"deleted-at"]}])}),e.children.push({name:[a,"filter"],children:[{name:[a,"comp-filter"],attributes:[["name","VCALENDAR"]],children:[{name:[a,"comp-filter"],attributes:[["name","VEVENT"]],children:[]}]}]});const t=y(e),r=await this._request.report(this._url+"objects",{Depth:"1"},t);return super._handleMultiStatusResponse(r)}async restore(e){await this._request.move(e,this._url+"restore/file")}}class $ extends Y{}const G=E("CalendarHome");class W extends j{constructor(...e){super(...e),super._registerCollectionFactory("{"+a+"}calendar",Y),super._registerCollectionFactory("{"+c+"}deleted-calendar",$),super._registerCollectionFactory("{"+u+"}subscribed",M),super._registerCollectionFactory("{"+a+"}schedule-inbox",X),super._registerCollectionFactory("{"+a+"}schedule-outbox",H),super._registerCollectionFactory("{"+c+"}trash-bin",z)}async findAllCalDAVCollections(){return super.findAllByFilter((e=>e instanceof Y||e instanceof z||e instanceof M||e instanceof X||e instanceof H||e instanceof $))}async findAllCalDAVCollectionsGrouped(){const e=await super.findAll();return{calendars:e.filter((e=>!(!(e instanceof Y)||e instanceof X||e instanceof M||e instanceof $))),deletedCalendars:e.filter((e=>e instanceof $)),trashBins:e.filter((e=>e instanceof z)),subscriptions:e.filter((e=>e instanceof M)),scheduleInboxes:e.filter((e=>e instanceof X)),scheduleOutboxes:e.filter((e=>e instanceof H))}}async findAllCalendars(){return super.findAllByFilter((e=>!(!(e instanceof Y)||e instanceof X||e instanceof M||e instanceof $)))}async findAllDeletedCalendars(){return super.findAllByFilter((e=>e instanceof $))}async findAllSubscriptions(){return super.findAllByFilter((e=>e instanceof M))}async findAllScheduleInboxes(){return super.findAllByFilter((e=>e instanceof X))}async findAllScheduleOutboxes(){return super.findAllByFilter((e=>e instanceof H))}async createCalendarCollection(e,t,r=null,n=null,i=null){G("creating a calendar collection");const c=[{name:[s,"resourcetype"],children:[{name:[s,"collection"]},{name:[a,"calendar"]}]},{name:[s,"displayname"],value:e},{name:[l,"calendar-color"],value:t},{name:[o,"calendar-enabled"],value:"1"}];i&&c.push({name:[a,"calendar-timezone"],value:i}),r&&c.push({name:[a,"supported-calendar-component-set"],children:r.map((e=>({name:[a,"comp"],attributes:[["name",e]]})))}),n&&c.push({name:[l,"calendar-order"],value:n});const u=super._getAvailableNameFromToken(e);return super.createCollection(u,c)}async createSubscribedCollection(e,t,r,n=null){G("creating a subscribed collection");const a=[{name:[s,"resourcetype"],children:[{name:[s,"collection"]},{name:[u,"subscribed"]}]},{name:[s,"displayname"],value:e},{name:[l,"calendar-color"],value:t},{name:[o,"calendar-enabled"],value:"1"},{name:[u,"source"],children:[{name:[s,"href"],value:r}]}];n&&a.push({name:[l,"calendar-order"],value:n});const i=super._getAvailableNameFromToken(e);return super.createCollection(i,a)}async search(){}async enableBirthdayCalendar(){const[e]=g([c,"enable-birthday-calendar"]),t=y(e);await this._request.post(this.url,{},t)}}function K(e){const t=[];return Object.entries(e).forEach((([e,r])=>{switch(e){case"{urn:ietf:params:xml:ns:carddav}addressbook-description":t.push({name:[i,"addressbook-description"],value:r});break;case"{http://owncloud.org/ns}enabled":t.push({name:[o,"enabled"],value:r?"1":"0"})}})),t}class Q extends F{constructor(...e){super(...e),super._exposeProperty("data",i,"address-data",!0),super._exposeProperty("hasphoto",c,"has-photo",!1)}static getPropFindList(){return super.getPropFindList().concat([[i,"address-data"]])}}const Z=E("AddressBook");class J extends(q(j)){constructor(...e){super(...e),super._registerObjectFactory("text/vcard",Q),super._registerPropSetFactory(K),super._exposeProperty("description",i,"addressbook-description",!0),super._exposeProperty("enabled",o,"enabled",!0),super._exposeProperty("readOnly",o,"read-only")}findAllVCards(){return super.findAllByFilter((e=>e instanceof Q))}async findAllAndFilterBySimpleProperties(e){const t=[];return e.forEach((e=>{t.push({name:[i,"prop"],attributes:[["name",e]]})})),this.addressbookQuery(null,[{name:[s,"getetag"]},{name:[s,"getcontenttype"]},{name:[s,"resourcetype"]},{name:[i,"address-data"],children:t},{name:[c,"has-photo"]}])}async createVCard(e){Z("creating VCard object");const t=T("","vcf");return super.createObject(t,{"Content-Type":"text/vcard; charset=utf-8"},e)}async addressbookQuery(e,t=null,r=null,n="anyof"){Z("sending an addressbook-query request");const[a]=g([i,"addressbook-query"]);t?a.children.push({name:[s,"prop"],children:t}):a.children.push({name:[s,"prop"],children:this._propFindList.map((e=>({name:e})))}),e&&a.children.push({name:[i,"filter"],attributes:[["test",n]],children:e}),r&&a.children.push({name:[i,"limit"],children:[{name:[i,"nresults"],value:r}]});const o=y(a),c=await this._request.report(this.url,{Depth:"1"},o);return super._handleMultiStatusResponse(c,J._isRetrievalPartial(t))}async addressbookMultiget(e=[],t){if(Z("sending an addressbook-multiget request"),0===e.length)return[];const r=this._buildMultiGetBody(e,t),n=await this._request.report(this.url,{Depth:"1"},r);return super._handleMultiStatusResponse(n,J._isRetrievalPartial(t))}async addressbookMultigetExport(e=[],t){if(Z("sending an addressbook-multiget request and request download"),0===e.length)return"";const r=this._buildMultiGetBody(e,t);return this._request.report(this.url+"?export",{Depth:"1"},r)}_buildMultiGetBody(e,t){const[r]=g([i,"addressbook-multiget"]);return t?r.children.push({name:[s,"prop"],children:t}):r.children.push({name:[s,"prop"],children:this._propFindList.map((e=>({name:e})))}),e.forEach((e=>{r.children.push({name:[s,"href"],value:e})})),y(r)}static getPropFindList(){return super.getPropFindList().concat([[i,"addressbook-description"],[i,"supported-address-data"],[i,"max-resource-size"],[u,"getctag"],[o,"enabled"],[o,"read-only"]])}static _isRetrievalPartial(e){if(!e)return!1;const t=e.find((e=>e.name[0]===i&&"address-data"===e.name[1]));return!!t&&!!t.children}}const ee=E("AddressBookHome");class te extends j{constructor(...e){super(...e),super._registerCollectionFactory("{"+i+"}addressbook",J)}async findAllAddressBooks(){return super.findAllByFilter((e=>e instanceof J))}async createAddressBookCollection(e){ee("creating an addressbook collection");const t=[{name:[s,"resourcetype"],children:[{name:[s,"collection"]},{name:[i,"addressbook"]}]},{name:[s,"displayname"],value:e}],r=super._getAvailableNameFromToken(e);return super.createCollection(r,t)}}class re extends F{constructor(...e){super(...e),super._exposeProperty("displayname",s,"displayname"),super._exposeProperty("calendarUserType",a,"calendar-user-type"),super._exposeProperty("calendarUserAddressSet",a,"calendar-user-address-set"),super._exposeProperty("principalUrl",s,"principal-URL"),super._exposeProperty("email",p,"email-address"),super._exposeProperty("language",c,"language"),super._exposeProperty("calendarHomes",a,"calendar-home-set"),super._exposeProperty("scheduleInbox",a,"schedule-inbox-URL"),super._exposeProperty("scheduleOutbox",a,"schedule-outbox-URL"),super._exposeProperty("addressBookHomes",i,"addressbook-home-set"),super._exposeProperty("roomType",c,"room-type"),super._exposeProperty("roomSeatingCapacity",c,"room-seating-capacity"),super._exposeProperty("roomBuildingAddress",c,"room-building-address"),super._exposeProperty("roomBuildingStory",c,"room-building-story"),super._exposeProperty("roomBuildingRoomNumber",c,"room-building-room-number"),super._exposeProperty("roomFeatures",c,"room-features"),Object.defineProperties(this,{principalScheme:{get:()=>{const e=this._request.pathname(this._request.baseUrl);let t=this.url.substr(e.length);return"/"===t.substr(-1)&&(t=t.substr(0,t.length-1)),"principal:"+t}},userId:{get:()=>"INDIVIDUAL"!==this.calendarUserType?null:this.url.split("/").splice(-2,2)[this.url.endsWith("/")?0:1]},groupId:{get:()=>"GROUP"!==this.calendarUserType?null:this.url.split("/").splice(-2,2)[this.url.endsWith("/")?0:1]},resourceId:{get:()=>"RESOURCE"!==this.calendarUserType?null:this.url.split("/").splice(-2,2)[this.url.endsWith("/")?0:1]},roomId:{get:()=>"ROOM"!==this.calendarUserType?null:this.url.split("/").splice(-2,2)[this.url.endsWith("/")?0:1]},roomAddress:{get:()=>[this.roomBuildingRoomNumber,this.roomBuildingStory,this.roomBuildingAddress].filter((e=>!!e)).join(", ")}})}static getPropFindList(e={}){const t=[[s,"displayname"],[a,"calendar-user-type"],[a,"calendar-user-address-set"],[s,"principal-URL"],[s,"alternate-URI-set"],[p,"email-address"],[c,"language"]];return e.enableCalDAV&&t.push([a,"calendar-home-set"],[a,"schedule-inbox-URL"],[a,"schedule-outbox-URL"],[c,"resource-type"],[c,"resource-vehicle-type"],[c,"resource-vehicle-make"],[c,"resource-vehicle-model"],[c,"resource-vehicle-is-electric"],[c,"resource-vehicle-range"],[c,"resource-vehicle-seating-capacity"],[c,"resource-contact-person"],[c,"resource-contact-person-vcard"],[c,"room-type"],[c,"room-seating-capacity"],[c,"room-building-address"],[c,"room-building-story"],[c,"room-building-room-number"],[c,"room-features"]),e.enableCardDAV&&t.push([i,"addressbook-home-set"]),t}}const ne=E("index.js");class se{constructor(e,r=null,n={}){this.rootUrl=null,"/"!==e.rootUrl.substr(-1)&&(e.rootUrl+="/"),Object.assign(this,e),this.advertisedFeatures=[],this.currentUserPrincipal=null,this.principalCollections=[],this.calendarHomes=[],this.publicCalendarHome=null,this.addressBookHomes=[],this.parser=new t,this._isConnected=!1,this._request=new R(this.rootUrl,this.parser,r)}async connect(e={enableCalDAV:!1,enableCardDAV:!1}){if(this._isConnected)return this;if(!this.rootUrl)throw new Error("No rootUrl configured");const t=await this._discoverPrincipalUri();ne("PrincipalURL: ".concat(t));const r=re.getPropFindList(e);(e.enableCalDAV||e.enableCardDAV)&&r.push([s,"principal-collection-set"],[s,"supported-report-set"]);const n=await this._request.propFind(t,r);return this.currentUserPrincipal=new re(null,this._request,t,n.body),this._extractAdvertisedDavFeatures(n.xhr),this._extractAddressBookHomes(n.body),this._extractCalendarHomes(n.body),this._extractPrincipalCollectionSets(n.body),this._createPublicCalendarHome(),this._isConnected=!0,this}async principalPropertySearchByDisplayname(e){return this.principalPropertySearch([{name:[s,"displayname"]}],e)}async principalPropertySearchByDisplaynameOrEmail(e){return this.principalPropertySearch([{name:[s,"displayname"]},{name:[p,"email-address"]}],e,"anyof")}async principalPropertySearchByAddress(e){return this.principalPropertySearch([{name:[c,"room-building-address"]}],e)}async principalPropertySearchByAddressAndStory(e,t){const[r]=g([s,"principal-property-search"]);r.children.push({name:[s,"property-search"],children:[{name:[s,"prop"],children:[{name:[c,"room-building-address"]}]},{name:[s,"match"],value:e}]}),r.children.push({name:[s,"property-search"],children:[{name:[s,"prop"],children:[{name:[c,"room-building-story"]}]},{name:[s,"match"],value:t}]}),r.children.push({name:[s,"prop"],children:re.getPropFindList().map((e=>({name:e})))}),r.children.push({name:[s,"apply-to-principal-collection-set"]});const n=y(r);return this._request.report(this.rootUrl,{Depth:0},n).then((e=>{const t=[];return Object.entries(e.body).forEach((([e,r])=>{const n=this._request.pathname(e);t.push(new re(null,this._request,n,r))})),t}))}async advancedPrincipalPropertySearch(e){const[t]=g([s,"principal-property-search"]);t.attributes=[["test","allof"]];const{displayName:r,capacity:n,features:a,roomType:i}=e;if(r&&t.children.push({name:[s,"property-search"],children:[{name:[s,"prop"],children:[{name:[s,"displayname"]},{name:[p,"email-address"]}]},{name:[s,"match"],value:r}]}),n&&t.children.push({name:[s,"property-search"],children:[{name:[s,"prop"],children:[{name:[c,"room-seating-capacity"]}]},{name:[s,"match"],value:n}]}),a&&a.length>0&&t.children.push({name:[s,"property-search"],children:[{name:[s,"prop"],children:[{name:[c,"room-features"]}]},{name:[s,"match"],value:a.join(",")}]}),i&&t.children.push({name:[s,"property-search"],children:[{name:[s,"prop"],children:[{name:[c,"room-type"]}]},{name:[s,"match"],value:i}]}),0===t.children.length)return[];t.children.push({name:[s,"prop"],children:re.getPropFindList({enableCalDAV:!0}).map((e=>({name:e})))}),t.children.push({name:[s,"apply-to-principal-collection-set"]});const o=y(t),l=await this._request.report(this.rootUrl,{Depth:0},o);return Object.entries(l.body).map((([e,t])=>{const r=this._request.pathname(e);return new re(null,this._request,r,t)}))}async principalPropertySearch(e,t,r){const[n,a]=g([s,"principal-property-search"],[s,"property-search"]);r&&(n.attributes=[["test",r]]),a.push({name:[s,"prop"],children:e},{name:[s,"match"],value:t}),n.children.push({name:[s,"prop"],children:re.getPropFindList().map((e=>({name:e})))}),n.children.push({name:[s,"apply-to-principal-collection-set"]});const i=y(n);return this._request.report(this.rootUrl,{Depth:0},i).then((e=>{const t=[];return Object.entries(e.body).forEach((([e,r])=>{const n=this._request.pathname(e);t.push(new re(null,this._request,n,r))})),t}))}async findPrincipal(e){return this._request.propFind(e,re.getPropFindList()).then((({body:t})=>new re(null,this._request,e,t))).catch((e=>{console.debug(e)}))}async _discoverPrincipalUri(){const e=await this._request.propFind(this.rootUrl,[[s,"current-user-principal"]],0);if(!e.body["{DAV:}current-user-principal"])throw new Error("Error retrieving current user principal");if("unauthenticated"===e.body["{DAV:}current-user-principal"].type)throw new Error("Current user is not authenticated");return this._request.pathname(e.body["{DAV:}current-user-principal"].href)}async _extractCalendarHomes(e){const t=e["{".concat(a,"}calendar-home-set")];t&&(this.calendarHomes=t.map((t=>{const r=this._request.pathname(t);return new W(this,this._request,r,e)})))}async _extractAddressBookHomes(e){const t=e["{".concat(i,"}addressbook-home-set")];t&&(this.addressBookHomes=t.map((t=>{const r=this._request.pathname(t);return new te(this,this._request,r,e)})))}_extractPrincipalCollectionSets(e){const t=e["{".concat(s,"}principal-collection-set")];this.principalCollections=t.map((e=>this._request.pathname(e)))}_extractAdvertisedDavFeatures(e){const t=e.getResponseHeader("DAV");this.advertisedFeatures.push(...t.split(",").map((e=>e.trim())))}_createPublicCalendarHome(){const e=this._request.pathname(this.rootUrl)+"public-calendars/";this.publicCalendarHome=new W(this,this._request,e,{})}}})(),n})()}));
//# sourceMappingURL=dist.js.map